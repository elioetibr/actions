{"version":3,"file":"terraform.mjs","sources":["../../../src/actions/iac/terraform/interfaces/ITerraformProvider.ts","../../../src/actions/iac/terraform/services/TerraformArgumentBuilder.ts","../../../src/actions/iac/terraform/services/TerraformStringFormatter.ts","../../../src/actions/iac/terraform/services/TerraformService.ts","../../../src/actions/iac/terraform/TerraformBuilder.ts","../../../src/tools/terraform/settings.ts","../../../src/tools/terraform/runner.ts"],"sourcesContent":["/**\n * Read-only provider interface for Terraform configuration\n * Provides access to Terraform configuration state without modification\n */\nexport interface ITerraformProvider {\n  /** The terraform command to execute (plan, apply, destroy, validate, fmt) */\n  readonly command: TerraformCommand;\n\n  /** The executor binary (terraform) */\n  readonly executor: string;\n\n  /** Working directory for terraform operations */\n  readonly workingDirectory: string;\n\n  /** Environment variables for the terraform process */\n  readonly environment: ReadonlyMap<string, string>;\n\n  /** Terraform variables (-var) */\n  readonly variables: ReadonlyMap<string, string>;\n\n  /** Terraform variable files (-var-file) */\n  readonly varFiles: readonly string[];\n\n  /** Backend configuration options (-backend-config) */\n  readonly backendConfig: ReadonlyMap<string, string>;\n\n  /** Target resources for targeted operations (-target) */\n  readonly targets: readonly string[];\n\n  /** Whether auto-approve is enabled (-auto-approve) */\n  readonly autoApprove: boolean;\n\n  /** Whether to run in dry-run mode (no actual execution) */\n  readonly dryRun: boolean;\n\n  /** Plan file path for apply operations */\n  readonly planFile: string | undefined;\n\n  /** Output file path for plan operations (-out) */\n  readonly outFile: string | undefined;\n\n  /** Whether to disable color output (-no-color) */\n  readonly noColor: boolean;\n\n  /** Whether to use compact warnings (-compact-warnings) */\n  readonly compactWarnings: boolean;\n\n  /** Parallelism level (-parallelism) */\n  readonly parallelism: number | undefined;\n\n  /** Lock timeout (-lock-timeout) */\n  readonly lockTimeout: string | undefined;\n\n  /** Whether to refresh state (-refresh) */\n  readonly refresh: boolean;\n\n  /** Whether to reconfigure backend (-reconfigure) */\n  readonly reconfigure: boolean;\n\n  /** Whether to migrate state (-migrate-state) */\n  readonly migrateState: boolean;\n}\n\n/**\n * Supported Terraform commands\n */\nexport type TerraformCommand =\n  | 'init'\n  | 'validate'\n  | 'fmt'\n  | 'plan'\n  | 'apply'\n  | 'destroy'\n  | 'output'\n  | 'show'\n  | 'state'\n  | 'import'\n  | 'refresh'\n  | 'taint'\n  | 'untaint'\n  | 'workspace';\n\n/**\n * Terraform command categories for validation\n */\nexport const TERRAFORM_COMMANDS: readonly TerraformCommand[] = [\n  'init',\n  'validate',\n  'fmt',\n  'plan',\n  'apply',\n  'destroy',\n  'output',\n  'show',\n  'state',\n  'import',\n  'refresh',\n  'taint',\n  'untaint',\n  'workspace',\n] as const;\n\n/**\n * Commands that support -auto-approve flag\n */\nexport const AUTO_APPROVE_COMMANDS: readonly TerraformCommand[] = [\n  'apply',\n  'destroy',\n] as const;\n\n/**\n * Commands that support -target flag\n */\nexport const TARGET_COMMANDS: readonly TerraformCommand[] = [\n  'plan',\n  'apply',\n  'destroy',\n  'refresh',\n  'taint',\n  'untaint',\n] as const;\n\n/**\n * Commands that support -var and -var-file flags\n */\nexport const VARIABLE_COMMANDS: readonly TerraformCommand[] = [\n  'plan',\n  'apply',\n  'destroy',\n  'refresh',\n  'import',\n] as const;\n","import {\n  AUTO_APPROVE_COMMANDS,\n  ITerraformProvider,\n  TARGET_COMMANDS,\n  TerraformCommand,\n  VARIABLE_COMMANDS,\n} from '../interfaces';\n\n/**\n * Builds command-line arguments for Terraform commands\n * Follows single responsibility principle - only handles argument construction\n */\nexport class TerraformArgumentBuilder {\n  constructor(private readonly provider: ITerraformProvider) {}\n\n  /**\n   * Generate command arguments based on provider configuration\n   * @returns Array of command-line arguments\n   */\n  toCommandArgs(): string[] {\n    const args: string[] = [];\n    const command = this.provider.command;\n\n    // Add command-specific arguments\n    this.addInitArguments(args, command);\n    this.addVariableArguments(args, command);\n    this.addTargetArguments(args, command);\n    this.addPlanArguments(args, command);\n    this.addApplyArguments(args, command);\n    this.addCommonArguments(args);\n\n    return args;\n  }\n\n  /**\n   * Generate full command array including executor and command\n   * @returns Full command array ready for execution\n   */\n  buildCommand(): string[] {\n    return [\n      this.provider.executor,\n      this.provider.command,\n      ...this.toCommandArgs(),\n    ];\n  }\n\n  /**\n   * Add init-specific arguments\n   */\n  private addInitArguments(args: string[], command: TerraformCommand): void {\n    if (command !== 'init') return;\n\n    // Backend configuration\n    for (const [key, value] of this.provider.backendConfig.entries()) {\n      args.push('-backend-config', `${key}=${value}`);\n    }\n\n    // Reconfigure flag\n    if (this.provider.reconfigure) {\n      args.push('-reconfigure');\n    }\n\n    // Migrate state flag\n    if (this.provider.migrateState) {\n      args.push('-migrate-state');\n    }\n  }\n\n  /**\n   * Add variable-related arguments (-var, -var-file)\n   */\n  private addVariableArguments(args: string[], command: TerraformCommand): void {\n    if (!this.supportsVariables(command)) return;\n\n    // Variable files\n    for (const varFile of this.provider.varFiles) {\n      args.push('-var-file', varFile);\n    }\n\n    // Individual variables\n    for (const [key, value] of this.provider.variables.entries()) {\n      args.push('-var', `${key}=${value}`);\n    }\n  }\n\n  /**\n   * Add target-related arguments (-target)\n   */\n  private addTargetArguments(args: string[], command: TerraformCommand): void {\n    if (!this.supportsTargets(command)) return;\n\n    for (const target of this.provider.targets) {\n      args.push('-target', target);\n    }\n  }\n\n  /**\n   * Add plan-specific arguments\n   */\n  private addPlanArguments(args: string[], command: TerraformCommand): void {\n    if (command !== 'plan') return;\n\n    // Output file\n    if (this.provider.outFile) {\n      args.push('-out', this.provider.outFile);\n    }\n\n    // Refresh control\n    if (!this.provider.refresh) {\n      args.push('-refresh=false');\n    }\n  }\n\n  /**\n   * Add apply/destroy-specific arguments\n   */\n  private addApplyArguments(args: string[], command: TerraformCommand): void {\n    if (!this.supportsAutoApprove(command)) return;\n\n    // Auto-approve flag\n    if (this.provider.autoApprove) {\n      args.push('-auto-approve');\n    }\n\n    // Refresh control (for apply/destroy)\n    if (command === 'apply' || command === 'destroy') {\n      if (!this.provider.refresh) {\n        args.push('-refresh=false');\n      }\n    }\n\n    // Plan file for apply (must be last argument, no flag)\n    if (command === 'apply' && this.provider.planFile) {\n      // Plan file is added after all flags\n    }\n  }\n\n  /**\n   * Add common arguments applicable to multiple commands\n   */\n  private addCommonArguments(args: string[]): void {\n    // Parallelism\n    if (this.provider.parallelism !== undefined) {\n      args.push('-parallelism', String(this.provider.parallelism));\n    }\n\n    // Lock timeout\n    if (this.provider.lockTimeout) {\n      args.push('-lock-timeout', this.provider.lockTimeout);\n    }\n\n    // No color output\n    if (this.provider.noColor) {\n      args.push('-no-color');\n    }\n\n    // Compact warnings\n    if (this.provider.compactWarnings) {\n      args.push('-compact-warnings');\n    }\n\n    // Plan file for apply command (must be positional, not a flag)\n    if (this.provider.command === 'apply' && this.provider.planFile) {\n      args.push(this.provider.planFile);\n    }\n  }\n\n  /**\n   * Check if command supports -var and -var-file flags\n   */\n  private supportsVariables(command: TerraformCommand): boolean {\n    return VARIABLE_COMMANDS.includes(command);\n  }\n\n  /**\n   * Check if command supports -target flag\n   */\n  private supportsTargets(command: TerraformCommand): boolean {\n    return TARGET_COMMANDS.includes(command);\n  }\n\n  /**\n   * Check if command supports -auto-approve flag\n   */\n  private supportsAutoApprove(command: TerraformCommand): boolean {\n    return AUTO_APPROVE_COMMANDS.includes(command);\n  }\n}\n","import { ITerraformProvider } from '../interfaces';\nimport { TerraformArgumentBuilder } from './TerraformArgumentBuilder';\n\n/**\n * Formats Terraform commands as strings for display and debugging\n * Follows single responsibility principle - only handles string formatting\n */\nexport class TerraformStringFormatter {\n  private readonly argumentBuilder: TerraformArgumentBuilder;\n\n  constructor(provider: ITerraformProvider) {\n    this.argumentBuilder = new TerraformArgumentBuilder(provider);\n  }\n\n  /**\n   * Generate command as a single-line string\n   * @returns Space-separated command string\n   */\n  toString(): string {\n    const command = this.argumentBuilder.buildCommand();\n    return command.map((arg) => this.escapeArg(arg)).join(' ');\n  }\n\n  /**\n   * Generate command as multi-line string with backslash continuations\n   * Suitable for shell scripts and documentation\n   * @returns Multi-line command string\n   */\n  toStringMultiLineCommand(): string {\n    const command = this.argumentBuilder.buildCommand();\n    if (command.length === 0) return '';\n\n    const lines: string[] = [];\n    let currentLine = '';\n\n    for (let i = 0; i < command.length; i++) {\n      const currentArg = command[i]!;\n      const arg = this.escapeArg(currentArg);\n      const isLast = i === command.length - 1;\n\n      // Check if this is a flag with a value\n      const nextArg = command[i + 1];\n      if (arg.startsWith('-') && !isLast && nextArg && !nextArg.startsWith('-')) {\n        // Flag with value - keep them together\n        currentLine = `  ${arg} ${this.escapeArg(nextArg)}`;\n        lines.push(currentLine + (i + 1 === command.length - 1 ? '' : ' \\\\'));\n        i++; // Skip the value in next iteration\n      } else if (i === 0) {\n        // Executor (terraform)\n        lines.push(arg + ' \\\\');\n      } else if (i === 1) {\n        // Command (plan, apply, etc.)\n        lines.push(`  ${arg}` + (isLast ? '' : ' \\\\'));\n      } else {\n        // Standalone argument\n        lines.push(`  ${arg}` + (isLast ? '' : ' \\\\'));\n      }\n    }\n\n    return lines.join('\\n');\n  }\n\n  /**\n   * Generate a string list (space-separated with equals for key-value pairs)\n   * @returns Array of strings suitable for StringListProvider\n   */\n  toStringList(): string[] {\n    return this.argumentBuilder.buildCommand();\n  }\n\n  /**\n   * Escape an argument for shell safety\n   * @param arg - Argument to escape\n   * @returns Escaped argument\n   */\n  private escapeArg(arg: string): string {\n    // If arg contains spaces, quotes, or special chars, wrap in quotes\n    if (/[\\s\"'\\\\$`]/.test(arg)) {\n      // Escape existing quotes and wrap in double quotes\n      return `\"${arg.replace(/\"/g, '\\\\\"')}\"`;\n    }\n    return arg;\n  }\n}\n","import { ITerraformService, TerraformCommand } from '../interfaces';\nimport { TerraformArgumentBuilder } from './TerraformArgumentBuilder';\nimport { TerraformStringFormatter } from './TerraformStringFormatter';\n\n/**\n * Main service implementation for Terraform operations\n * Implements ITerraformService with fluent configuration methods\n */\nexport class TerraformService implements ITerraformService {\n  // Core configuration\n  private _command: TerraformCommand;\n  private _workingDirectory: string;\n  private readonly _executor: string = 'terraform';\n\n  // Environment and variables\n  private readonly _environment: Map<string, string> = new Map();\n  private readonly _variables: Map<string, string> = new Map();\n  private readonly _varFiles: string[] = [];\n  private readonly _backendConfig: Map<string, string> = new Map();\n  private readonly _targets: string[] = [];\n\n  // Flags\n  private _autoApprove: boolean = false;\n  private _dryRun: boolean = false;\n  private _noColor: boolean = false;\n  private _compactWarnings: boolean = false;\n  private _refresh: boolean = true;\n  private _reconfigure: boolean = false;\n  private _migrateState: boolean = false;\n\n  // Optional values\n  private _planFile: string | undefined;\n  private _outFile: string | undefined;\n  private _parallelism: number | undefined;\n  private _lockTimeout: string | undefined;\n\n  // Internal services\n  private readonly argumentBuilder: TerraformArgumentBuilder;\n  private readonly stringFormatter: TerraformStringFormatter;\n\n  constructor(command: TerraformCommand, workingDirectory: string = '.') {\n    this._command = command;\n    this._workingDirectory = workingDirectory;\n    this.argumentBuilder = new TerraformArgumentBuilder(this);\n    this.stringFormatter = new TerraformStringFormatter(this);\n  }\n\n  // ============ ITerraformProvider Implementation (Read-only) ============\n\n  get command(): TerraformCommand {\n    return this._command;\n  }\n\n  get executor(): string {\n    return this._executor;\n  }\n\n  get workingDirectory(): string {\n    return this._workingDirectory;\n  }\n\n  get environment(): ReadonlyMap<string, string> {\n    return this._environment;\n  }\n\n  get variables(): ReadonlyMap<string, string> {\n    return this._variables;\n  }\n\n  get varFiles(): readonly string[] {\n    return [...this._varFiles];\n  }\n\n  get backendConfig(): ReadonlyMap<string, string> {\n    return this._backendConfig;\n  }\n\n  get targets(): readonly string[] {\n    return [...this._targets];\n  }\n\n  get autoApprove(): boolean {\n    return this._autoApprove;\n  }\n\n  get dryRun(): boolean {\n    return this._dryRun;\n  }\n\n  get planFile(): string | undefined {\n    return this._planFile;\n  }\n\n  get outFile(): string | undefined {\n    return this._outFile;\n  }\n\n  get noColor(): boolean {\n    return this._noColor;\n  }\n\n  get compactWarnings(): boolean {\n    return this._compactWarnings;\n  }\n\n  get parallelism(): number | undefined {\n    return this._parallelism;\n  }\n\n  get lockTimeout(): string | undefined {\n    return this._lockTimeout;\n  }\n\n  get refresh(): boolean {\n    return this._refresh;\n  }\n\n  get reconfigure(): boolean {\n    return this._reconfigure;\n  }\n\n  get migrateState(): boolean {\n    return this._migrateState;\n  }\n\n  // ============ IStringListProvider Implementation ============\n\n  get useStringList(): boolean {\n    return true;\n  }\n\n  get stringList(): string[] {\n    return this.stringFormatter.toStringList();\n  }\n\n  // ============ ITerraformService Implementation (Mutators) ============\n\n  setCommand(command: TerraformCommand): this {\n    this._command = command;\n    return this;\n  }\n\n  setWorkingDirectory(directory: string): this {\n    this._workingDirectory = directory;\n    return this;\n  }\n\n  addEnvironmentVariable(key: string, value: string): this {\n    this._environment.set(key, value);\n    return this;\n  }\n\n  removeEnvironmentVariable(key: string): this {\n    this._environment.delete(key);\n    return this;\n  }\n\n  clearEnvironmentVariables(): this {\n    this._environment.clear();\n    return this;\n  }\n\n  addVariable(key: string, value: string): this {\n    this._variables.set(key, value);\n    return this;\n  }\n\n  removeVariable(key: string): this {\n    this._variables.delete(key);\n    return this;\n  }\n\n  clearVariables(): this {\n    this._variables.clear();\n    return this;\n  }\n\n  addVarFile(filePath: string): this {\n    if (!this._varFiles.includes(filePath)) {\n      this._varFiles.push(filePath);\n    }\n    return this;\n  }\n\n  removeVarFile(filePath: string): this {\n    const index = this._varFiles.indexOf(filePath);\n    if (index !== -1) {\n      this._varFiles.splice(index, 1);\n    }\n    return this;\n  }\n\n  clearVarFiles(): this {\n    this._varFiles.length = 0;\n    return this;\n  }\n\n  addBackendConfig(key: string, value: string): this {\n    this._backendConfig.set(key, value);\n    return this;\n  }\n\n  removeBackendConfig(key: string): this {\n    this._backendConfig.delete(key);\n    return this;\n  }\n\n  clearBackendConfig(): this {\n    this._backendConfig.clear();\n    return this;\n  }\n\n  addTarget(target: string): this {\n    if (!this._targets.includes(target)) {\n      this._targets.push(target);\n    }\n    return this;\n  }\n\n  removeTarget(target: string): this {\n    const index = this._targets.indexOf(target);\n    if (index !== -1) {\n      this._targets.splice(index, 1);\n    }\n    return this;\n  }\n\n  clearTargets(): this {\n    this._targets.length = 0;\n    return this;\n  }\n\n  setAutoApprove(enabled: boolean): this {\n    this._autoApprove = enabled;\n    return this;\n  }\n\n  setDryRun(enabled: boolean): this {\n    this._dryRun = enabled;\n    return this;\n  }\n\n  setPlanFile(filePath: string | undefined): this {\n    this._planFile = filePath;\n    return this;\n  }\n\n  setOutFile(filePath: string | undefined): this {\n    this._outFile = filePath;\n    return this;\n  }\n\n  setNoColor(enabled: boolean): this {\n    this._noColor = enabled;\n    return this;\n  }\n\n  setCompactWarnings(enabled: boolean): this {\n    this._compactWarnings = enabled;\n    return this;\n  }\n\n  setParallelism(level: number | undefined): this {\n    this._parallelism = level;\n    return this;\n  }\n\n  setLockTimeout(timeout: string | undefined): this {\n    this._lockTimeout = timeout;\n    return this;\n  }\n\n  setRefresh(enabled: boolean): this {\n    this._refresh = enabled;\n    return this;\n  }\n\n  setReconfigure(enabled: boolean): this {\n    this._reconfigure = enabled;\n    return this;\n  }\n\n  setMigrateState(enabled: boolean): this {\n    this._migrateState = enabled;\n    return this;\n  }\n\n  // ============ Command Generation Methods ============\n\n  toCommandArgs(): string[] {\n    return this.argumentBuilder.toCommandArgs();\n  }\n\n  buildCommand(): string[] {\n    return this.argumentBuilder.buildCommand();\n  }\n\n  toString(): string {\n    return this.stringFormatter.toString();\n  }\n\n  toStringMultiLineCommand(): string {\n    return this.stringFormatter.toStringMultiLineCommand();\n  }\n\n  // ============ Utility Methods ============\n\n  reset(): this {\n    this._environment.clear();\n    this._variables.clear();\n    this._varFiles.length = 0;\n    this._backendConfig.clear();\n    this._targets.length = 0;\n    this._autoApprove = false;\n    this._dryRun = false;\n    this._noColor = false;\n    this._compactWarnings = false;\n    this._refresh = true;\n    this._reconfigure = false;\n    this._migrateState = false;\n    this._planFile = undefined;\n    this._outFile = undefined;\n    this._parallelism = undefined;\n    this._lockTimeout = undefined;\n    return this;\n  }\n\n  clone(): ITerraformService {\n    const cloned = new TerraformService(this._command, this._workingDirectory);\n\n    // Copy environment\n    for (const [key, value] of this._environment.entries()) {\n      cloned.addEnvironmentVariable(key, value);\n    }\n\n    // Copy variables\n    for (const [key, value] of this._variables.entries()) {\n      cloned.addVariable(key, value);\n    }\n\n    // Copy var files\n    for (const varFile of this._varFiles) {\n      cloned.addVarFile(varFile);\n    }\n\n    // Copy backend config\n    for (const [key, value] of this._backendConfig.entries()) {\n      cloned.addBackendConfig(key, value);\n    }\n\n    // Copy targets\n    for (const target of this._targets) {\n      cloned.addTarget(target);\n    }\n\n    // Copy flags\n    cloned.setAutoApprove(this._autoApprove);\n    cloned.setDryRun(this._dryRun);\n    cloned.setNoColor(this._noColor);\n    cloned.setCompactWarnings(this._compactWarnings);\n    cloned.setRefresh(this._refresh);\n    cloned.setReconfigure(this._reconfigure);\n    cloned.setMigrateState(this._migrateState);\n\n    // Copy optional values\n    cloned.setPlanFile(this._planFile);\n    cloned.setOutFile(this._outFile);\n    cloned.setParallelism(this._parallelism);\n    cloned.setLockTimeout(this._lockTimeout);\n\n    return cloned;\n  }\n}\n","import { ValidationUtils } from '../../../libs/utils';\nimport {\n  ITerraformBuilder,\n  ITerraformService,\n  TERRAFORM_COMMANDS,\n  TerraformCommand,\n} from './interfaces';\nimport { TerraformService } from './services';\n\n/**\n * Fluent builder for constructing Terraform service instances\n * Provides a type-safe API for configuring Terraform commands\n */\nexport class TerraformBuilder implements ITerraformBuilder {\n  // Core configuration\n  private _command: TerraformCommand | undefined;\n  private _workingDirectory: string = '.';\n\n  // Environment and variables\n  private readonly _environment: Map<string, string> = new Map();\n  private readonly _variables: Map<string, string> = new Map();\n  private readonly _varFiles: string[] = [];\n  private readonly _backendConfig: Map<string, string> = new Map();\n  private readonly _targets: string[] = [];\n\n  // Flags\n  private _autoApprove: boolean = false;\n  private _dryRun: boolean = false;\n  private _noColor: boolean = false;\n  private _compactWarnings: boolean = false;\n  private _refresh: boolean = true;\n  private _reconfigure: boolean = false;\n  private _migrateState: boolean = false;\n\n  // Optional values\n  private _planFile: string | undefined;\n  private _outFile: string | undefined;\n  private _parallelism: number | undefined;\n  private _lockTimeout: string | undefined;\n\n  /**\n   * Private constructor - use static factory methods\n   */\n  private constructor() {}\n\n  // ============ Static Factory Methods ============\n\n  /**\n   * Create a new TerraformBuilder instance\n   * @param command - Optional initial command\n   */\n  static create(command?: TerraformCommand): TerraformBuilder {\n    const builder = new TerraformBuilder();\n    if (command) {\n      builder.withCommand(command);\n    }\n    return builder;\n  }\n\n  /**\n   * Create a builder for terraform init\n   */\n  static forInit(): TerraformBuilder {\n    return TerraformBuilder.create('init');\n  }\n\n  /**\n   * Create a builder for terraform validate\n   */\n  static forValidate(): TerraformBuilder {\n    return TerraformBuilder.create('validate');\n  }\n\n  /**\n   * Create a builder for terraform fmt\n   */\n  static forFmt(): TerraformBuilder {\n    return TerraformBuilder.create('fmt');\n  }\n\n  /**\n   * Create a builder for terraform plan\n   */\n  static forPlan(): TerraformBuilder {\n    return TerraformBuilder.create('plan');\n  }\n\n  /**\n   * Create a builder for terraform apply\n   */\n  static forApply(): TerraformBuilder {\n    return TerraformBuilder.create('apply');\n  }\n\n  /**\n   * Create a builder for terraform destroy\n   */\n  static forDestroy(): TerraformBuilder {\n    return TerraformBuilder.create('destroy');\n  }\n\n  /**\n   * Create a builder for terraform output\n   */\n  static forOutput(): TerraformBuilder {\n    return TerraformBuilder.create('output');\n  }\n\n  /**\n   * Create a builder for terraform show\n   */\n  static forShow(): TerraformBuilder {\n    return TerraformBuilder.create('show');\n  }\n\n  // ============ ITerraformBuilder Implementation ============\n\n  withCommand(command: TerraformCommand): this {\n    this.validateCommand(command);\n    this._command = command;\n    return this;\n  }\n\n  withWorkingDirectory(directory: string): this {\n    ValidationUtils.validateStringInput(directory, 'workingDirectory');\n    this._workingDirectory = directory;\n    return this;\n  }\n\n  withEnvironmentVariable(key: string, value: string): this {\n    ValidationUtils.validateStringInput(key, 'environment variable key');\n    this._environment.set(key, value);\n    return this;\n  }\n\n  withEnvironmentVariables(variables: Record<string, string>): this {\n    for (const [key, value] of Object.entries(variables)) {\n      this.withEnvironmentVariable(key, value);\n    }\n    return this;\n  }\n\n  withVariable(key: string, value: string): this {\n    ValidationUtils.validateStringInput(key, 'variable key');\n    this._variables.set(key, value);\n    return this;\n  }\n\n  withVariables(variables: Record<string, string>): this {\n    for (const [key, value] of Object.entries(variables)) {\n      this.withVariable(key, value);\n    }\n    return this;\n  }\n\n  withVarFile(filePath: string): this {\n    ValidationUtils.validateStringInput(filePath, 'var file path');\n    if (!this._varFiles.includes(filePath)) {\n      this._varFiles.push(filePath);\n    }\n    return this;\n  }\n\n  withVarFiles(filePaths: string[]): this {\n    for (const filePath of filePaths) {\n      this.withVarFile(filePath);\n    }\n    return this;\n  }\n\n  withBackendConfig(key: string, value: string): this {\n    ValidationUtils.validateStringInput(key, 'backend config key');\n    this._backendConfig.set(key, value);\n    return this;\n  }\n\n  withBackendConfigs(config: Record<string, string>): this {\n    for (const [key, value] of Object.entries(config)) {\n      this.withBackendConfig(key, value);\n    }\n    return this;\n  }\n\n  withTarget(target: string): this {\n    ValidationUtils.validateStringInput(target, 'target');\n    if (!this._targets.includes(target)) {\n      this._targets.push(target);\n    }\n    return this;\n  }\n\n  withTargets(targets: string[]): this {\n    for (const target of targets) {\n      this.withTarget(target);\n    }\n    return this;\n  }\n\n  withAutoApprove(): this {\n    this._autoApprove = true;\n    return this;\n  }\n\n  withDryRun(): this {\n    this._dryRun = true;\n    return this;\n  }\n\n  withPlanFile(filePath: string): this {\n    ValidationUtils.validateStringInput(filePath, 'plan file path');\n    this._planFile = filePath;\n    return this;\n  }\n\n  withOutFile(filePath: string): this {\n    ValidationUtils.validateStringInput(filePath, 'output file path');\n    this._outFile = filePath;\n    return this;\n  }\n\n  withNoColor(): this {\n    this._noColor = true;\n    return this;\n  }\n\n  withCompactWarnings(): this {\n    this._compactWarnings = true;\n    return this;\n  }\n\n  withParallelism(level: number): this {\n    if (level < 1) {\n      throw new Error('Parallelism level must be at least 1');\n    }\n    this._parallelism = level;\n    return this;\n  }\n\n  withLockTimeout(timeout: string): this {\n    ValidationUtils.validateStringInput(timeout, 'lock timeout');\n    this._lockTimeout = timeout;\n    return this;\n  }\n\n  withRefresh(): this {\n    this._refresh = true;\n    return this;\n  }\n\n  withoutRefresh(): this {\n    this._refresh = false;\n    return this;\n  }\n\n  withReconfigure(): this {\n    this._reconfigure = true;\n    return this;\n  }\n\n  withMigrateState(): this {\n    this._migrateState = true;\n    return this;\n  }\n\n  reset(): this {\n    this._command = undefined;\n    this._workingDirectory = '.';\n    this._environment.clear();\n    this._variables.clear();\n    this._varFiles.length = 0;\n    this._backendConfig.clear();\n    this._targets.length = 0;\n    this._autoApprove = false;\n    this._dryRun = false;\n    this._noColor = false;\n    this._compactWarnings = false;\n    this._refresh = true;\n    this._reconfigure = false;\n    this._migrateState = false;\n    this._planFile = undefined;\n    this._outFile = undefined;\n    this._parallelism = undefined;\n    this._lockTimeout = undefined;\n    return this;\n  }\n\n  build(): ITerraformService {\n    // Validate required fields\n    if (!this._command) {\n      throw new Error('Terraform command is required. Use withCommand() or a static factory method.');\n    }\n\n    // Create service instance\n    const service = new TerraformService(this._command, this._workingDirectory);\n\n    // Transfer environment variables\n    for (const [key, value] of this._environment.entries()) {\n      service.addEnvironmentVariable(key, value);\n    }\n\n    // Transfer variables\n    for (const [key, value] of this._variables.entries()) {\n      service.addVariable(key, value);\n    }\n\n    // Transfer var files\n    for (const varFile of this._varFiles) {\n      service.addVarFile(varFile);\n    }\n\n    // Transfer backend config\n    for (const [key, value] of this._backendConfig.entries()) {\n      service.addBackendConfig(key, value);\n    }\n\n    // Transfer targets\n    for (const target of this._targets) {\n      service.addTarget(target);\n    }\n\n    // Transfer flags\n    service.setAutoApprove(this._autoApprove);\n    service.setDryRun(this._dryRun);\n    service.setNoColor(this._noColor);\n    service.setCompactWarnings(this._compactWarnings);\n    service.setRefresh(this._refresh);\n    service.setReconfigure(this._reconfigure);\n    service.setMigrateState(this._migrateState);\n\n    // Transfer optional values\n    service.setPlanFile(this._planFile);\n    service.setOutFile(this._outFile);\n    service.setParallelism(this._parallelism);\n    service.setLockTimeout(this._lockTimeout);\n\n    return service;\n  }\n\n  // ============ Private Helper Methods ============\n\n  /**\n   * Validate that a command is a valid Terraform command\n   */\n  private validateCommand(command: string): void {\n    if (!TERRAFORM_COMMANDS.includes(command as TerraformCommand)) {\n      throw new Error(\n        `Invalid Terraform command: ${command}. Valid commands are: ${TERRAFORM_COMMANDS.join(', ')}`\n      );\n    }\n  }\n}\n","import type { IAgent } from '../../agents/interfaces';\nimport type { TerraformCommand } from '../../actions/iac/terraform/interfaces';\nimport { parseCommaSeparated, parseJsonObject } from '../../libs/utils';\n\n/**\n * Input settings for Terraform operations\n */\nexport interface ITerraformSettings {\n  command: TerraformCommand;\n  workingDirectory: string;\n  variables: Record<string, string>;\n  varFiles: string[];\n  backendConfig: Record<string, string>;\n  targets: string[];\n  autoApprove: boolean;\n  planFile: string;\n  noColor: boolean;\n  compactWarnings: boolean;\n  parallelism: string;\n  lockTimeout: string;\n  refresh: string;\n  reconfigure: boolean;\n  migrateState: boolean;\n  dryRun: boolean;\n}\n\n/**\n * Get Terraform settings from agent inputs\n */\nexport function getSettings(agent: IAgent): ITerraformSettings {\n  return {\n    command: agent.getInput('command', true) as TerraformCommand,\n    workingDirectory: agent.getInput('working-directory') || '.',\n    variables: parseJsonObject(agent.getInput('variables')),\n    varFiles: parseCommaSeparated(agent.getInput('var-files')),\n    backendConfig: parseJsonObject(agent.getInput('backend-config')),\n    targets: parseCommaSeparated(agent.getInput('targets')),\n    autoApprove: agent.getBooleanInput('auto-approve'),\n    planFile: agent.getInput('plan-file'),\n    noColor: agent.getBooleanInput('no-color'),\n    compactWarnings: agent.getBooleanInput('compact-warnings'),\n    parallelism: agent.getInput('parallelism'),\n    lockTimeout: agent.getInput('lock-timeout'),\n    refresh: agent.getInput('refresh'),\n    reconfigure: agent.getBooleanInput('reconfigure'),\n    migrateState: agent.getBooleanInput('migrate-state'),\n    dryRun: agent.getBooleanInput('dry-run'),\n  };\n}\n","import type { IAgent, IRunnerResult } from '../../agents/interfaces';\nimport { RunnerBase } from '../common/runner-base';\nimport { TerraformBuilder } from '../../actions/iac/terraform/TerraformBuilder';\nimport { getSettings, type ITerraformSettings } from './settings';\n\n/**\n * Terraform runner\n * Handles command generation and execution for Terraform operations\n */\nexport class TerraformRunner extends RunnerBase {\n  readonly name = 'terraform';\n\n  protected readonly steps = new Map<string, (agent: IAgent) => Promise<IRunnerResult>>([\n    ['execute', this.execute.bind(this)],\n  ]);\n\n  /**\n   * Execute step: Build and run the Terraform command\n   * Uses the IAgent.exec() interface for safe command execution (not child_process)\n   */\n  private async execute(agent: IAgent): Promise<IRunnerResult> {\n    try {\n      const settings = getSettings(agent);\n\n      agent.info(`Starting Terraform ${settings.command} action...`);\n\n      // Build the service\n      const service = this.buildService(settings);\n\n      // Get command details\n      const commandArgs = service.buildCommand();\n      const commandString = service.toString();\n\n      agent.info(`Command: ${commandString}`);\n\n      const baseOutputs: Record<string, string | number | boolean> = {\n        command: settings.command,\n        'command-args': JSON.stringify(commandArgs),\n        'command-string': commandString,\n      };\n\n      // Execute if not dry run\n      if (settings.dryRun) {\n        agent.info('Dry run mode - skipping execution');\n        return this.success({\n          ...baseOutputs,\n          'exit-code': '0',\n          stdout: '',\n          stderr: '',\n        });\n      }\n\n      // Safe execution via IAgent interface (uses execFile internally, not shell)\n      const result = await agent.exec(commandArgs[0]!, commandArgs.slice(1), {\n        cwd: settings.workingDirectory,\n        ignoreReturnCode: true,\n      });\n\n      const outputs = {\n        ...baseOutputs,\n        'exit-code': result.exitCode.toString(),\n        stdout: result.stdout,\n        stderr: result.stderr,\n      };\n\n      if (result.exitCode !== 0) {\n        return this.failure(\n          new Error(`Terraform ${settings.command} failed with exit code ${result.exitCode}`),\n          outputs,\n        );\n      }\n\n      return this.success(outputs);\n    } catch (error) {\n      return this.failure(error instanceof Error ? error : new Error(String(error)));\n    }\n  }\n\n  /**\n   * Build the Terraform service from settings\n   */\n  private buildService(settings: ITerraformSettings) {\n    const builder = TerraformBuilder.create(settings.command).withWorkingDirectory(\n      settings.workingDirectory,\n    );\n\n    if (Object.keys(settings.variables).length > 0) {\n      builder.withVariables(settings.variables);\n    }\n    if (settings.varFiles.length > 0) {\n      builder.withVarFiles(settings.varFiles);\n    }\n    if (Object.keys(settings.backendConfig).length > 0) {\n      builder.withBackendConfigs(settings.backendConfig);\n    }\n    if (settings.targets.length > 0) {\n      builder.withTargets(settings.targets);\n    }\n    if (settings.autoApprove) {\n      builder.withAutoApprove();\n    }\n    if (settings.planFile) {\n      if (settings.command === 'apply') {\n        builder.withPlanFile(settings.planFile);\n      } else if (settings.command === 'plan') {\n        builder.withOutFile(settings.planFile);\n      }\n    }\n    if (settings.noColor) {\n      builder.withNoColor();\n    }\n    if (settings.compactWarnings) {\n      builder.withCompactWarnings();\n    }\n    if (settings.parallelism) {\n      builder.withParallelism(parseInt(settings.parallelism, 10));\n    }\n    if (settings.lockTimeout) {\n      builder.withLockTimeout(settings.lockTimeout);\n    }\n    if (settings.refresh === 'false') {\n      builder.withoutRefresh();\n    }\n    if (settings.reconfigure) {\n      builder.withReconfigure();\n    }\n    if (settings.migrateState) {\n      builder.withMigrateState();\n    }\n    if (settings.dryRun) {\n      builder.withDryRun();\n    }\n\n    return builder.build();\n  }\n}\n\n/**\n * Factory function to create a Terraform runner\n */\nexport function createTerraformRunner(): TerraformRunner {\n  return new TerraformRunner();\n}\n"],"names":[],"mappings":"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"}