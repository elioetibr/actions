{"version":3,"file":"terraform.mjs","sources":["../../../src/actions/iac/common/BaseIacBuilder.ts","../../../src/actions/iac/terraform/interfaces/ITerraformProvider.ts","../../../src/actions/iac/common/interfaces/IIacProvider.ts","../../../src/actions/iac/common/services/BaseIacArgumentBuilder.ts","../../../src/actions/iac/terraform/services/TerraformArgumentBuilder.ts","../../../src/actions/iac/common/services/BaseIacService.ts","../../../src/actions/iac/common/services/BaseIacStringFormatter.ts","../../../src/actions/iac/terraform/services/TerraformStringFormatter.ts","../../../src/actions/iac/terraform/services/TerraformService.ts","../../../src/actions/iac/terraform/TerraformBuilder.ts","../../../src/tools/terraform/settings.ts","../../../src/libs/version-manager/platform.ts","../../../src/libs/version-manager/version-detector.ts","../../../src/libs/version-manager/version-file-reader.ts","../../../src/libs/version-manager/terraform-version-manager.ts","../../../src/libs/version-manager/terragrunt-version-manager.ts","../../../src/tools/terraform/runner.ts"],"sourcesContent":["import { addUnique, ValidationUtils } from '../../../libs/utils';\nimport { IIacBuilder, IIacService } from './interfaces';\n\n/**\n * Abstract base builder for IaC service instances\n * Contains all shared builder state (17 fields) and 24 shared builder methods\n * Subclasses implement build() and tool-specific builder methods\n */\nexport abstract class BaseIacBuilder<\n  TCommand extends string,\n  TService extends IIacService,\n> implements IIacBuilder<TService> {\n  // Core configuration\n  protected _command: TCommand | undefined;\n  protected _workingDirectory: string = '.';\n\n  // Environment and variables\n  protected readonly _environment: Map<string, string> = new Map();\n  protected readonly _variables: Map<string, string> = new Map();\n  protected readonly _varFiles: string[] = [];\n  protected readonly _backendConfig: Map<string, string> = new Map();\n  protected readonly _targets: string[] = [];\n\n  // Flags\n  protected _autoApprove: boolean = false;\n  protected _dryRun: boolean = false;\n  protected _noColor: boolean = false;\n  protected _compactWarnings: boolean = false;\n  protected _refresh: boolean = true;\n  protected _reconfigure: boolean = false;\n  protected _migrateState: boolean = false;\n\n  // Optional values\n  protected _planFile: string | undefined;\n  protected _outFile: string | undefined;\n  protected _parallelism: number | undefined;\n  protected _lockTimeout: string | undefined;\n\n  // ============ Abstract Methods ============\n\n  abstract build(): TService;\n  protected abstract resetSpecific(): void;\n\n  // ============ Shared Builder Methods ============\n\n  withCommand(command: TCommand): this {\n    this.validateCommand(command);\n    this._command = command;\n    return this;\n  }\n\n  withWorkingDirectory(directory: string): this {\n    ValidationUtils.validateStringInput(directory, 'workingDirectory');\n    this._workingDirectory = directory;\n    return this;\n  }\n\n  withEnvironmentVariable(key: string, value: string): this {\n    ValidationUtils.validateStringInput(key, 'environment variable key');\n    this._environment.set(key, value);\n    return this;\n  }\n\n  withEnvironmentVariables(variables: Record<string, string>): this {\n    for (const [key, value] of Object.entries(variables)) {\n      this.withEnvironmentVariable(key, value);\n    }\n    return this;\n  }\n\n  withVariable(key: string, value: string): this {\n    ValidationUtils.validateStringInput(key, 'variable key');\n    this._variables.set(key, value);\n    return this;\n  }\n\n  withVariables(variables: Record<string, string>): this {\n    for (const [key, value] of Object.entries(variables)) {\n      this.withVariable(key, value);\n    }\n    return this;\n  }\n\n  withVarFile(filePath: string): this {\n    ValidationUtils.validateStringInput(filePath, 'var file path');\n    addUnique(this._varFiles, filePath);\n    return this;\n  }\n\n  withVarFiles(filePaths: string[]): this {\n    for (const filePath of filePaths) {\n      this.withVarFile(filePath);\n    }\n    return this;\n  }\n\n  withBackendConfig(key: string, value: string): this {\n    ValidationUtils.validateStringInput(key, 'backend config key');\n    this._backendConfig.set(key, value);\n    return this;\n  }\n\n  withBackendConfigs(config: Record<string, string>): this {\n    for (const [key, value] of Object.entries(config)) {\n      this.withBackendConfig(key, value);\n    }\n    return this;\n  }\n\n  withTarget(target: string): this {\n    ValidationUtils.validateStringInput(target, 'target');\n    addUnique(this._targets, target);\n    return this;\n  }\n\n  withTargets(targets: string[]): this {\n    for (const target of targets) {\n      this.withTarget(target);\n    }\n    return this;\n  }\n\n  withAutoApprove(): this {\n    this._autoApprove = true;\n    return this;\n  }\n\n  withDryRun(): this {\n    this._dryRun = true;\n    return this;\n  }\n\n  withPlanFile(filePath: string): this {\n    ValidationUtils.validateStringInput(filePath, 'plan file path');\n    this._planFile = filePath;\n    return this;\n  }\n\n  withOutFile(filePath: string): this {\n    ValidationUtils.validateStringInput(filePath, 'output file path');\n    this._outFile = filePath;\n    return this;\n  }\n\n  withNoColor(): this {\n    this._noColor = true;\n    return this;\n  }\n\n  withCompactWarnings(): this {\n    this._compactWarnings = true;\n    return this;\n  }\n\n  withParallelism(level: number): this {\n    if (level < 1) {\n      throw new Error('Parallelism level must be at least 1');\n    }\n    this._parallelism = level;\n    return this;\n  }\n\n  withLockTimeout(timeout: string): this {\n    ValidationUtils.validateStringInput(timeout, 'lock timeout');\n    this._lockTimeout = timeout;\n    return this;\n  }\n\n  withRefresh(): this {\n    this._refresh = true;\n    return this;\n  }\n\n  withoutRefresh(): this {\n    this._refresh = false;\n    return this;\n  }\n\n  withReconfigure(): this {\n    this._reconfigure = true;\n    return this;\n  }\n\n  withMigrateState(): this {\n    this._migrateState = true;\n    return this;\n  }\n\n  reset(): this {\n    this._command = undefined;\n    this._workingDirectory = '.';\n    this._environment.clear();\n    this._variables.clear();\n    this._varFiles.length = 0;\n    this._backendConfig.clear();\n    this._targets.length = 0;\n    this._autoApprove = false;\n    this._dryRun = false;\n    this._noColor = false;\n    this._compactWarnings = false;\n    this._refresh = true;\n    this._reconfigure = false;\n    this._migrateState = false;\n    this._planFile = undefined;\n    this._outFile = undefined;\n    this._parallelism = undefined;\n    this._lockTimeout = undefined;\n    this.resetSpecific();\n    return this;\n  }\n\n  // ============ Protected Helpers ============\n\n  /**\n   * Transfer all shared builder state to a service instance\n   */\n  protected transferSharedState(service: IIacService): void {\n    // Transfer environment variables\n    for (const [key, value] of this._environment.entries()) {\n      service.addEnvironmentVariable(key, value);\n    }\n\n    // Transfer variables\n    for (const [key, value] of this._variables.entries()) {\n      service.addVariable(key, value);\n    }\n\n    // Transfer var files\n    for (const varFile of this._varFiles) {\n      service.addVarFile(varFile);\n    }\n\n    // Transfer backend config\n    for (const [key, value] of this._backendConfig.entries()) {\n      service.addBackendConfig(key, value);\n    }\n\n    // Transfer targets\n    for (const target of this._targets) {\n      service.addTarget(target);\n    }\n\n    // Transfer flags\n    service.setAutoApprove(this._autoApprove);\n    service.setDryRun(this._dryRun);\n    service.setNoColor(this._noColor);\n    service.setCompactWarnings(this._compactWarnings);\n    service.setRefresh(this._refresh);\n    service.setReconfigure(this._reconfigure);\n    service.setMigrateState(this._migrateState);\n\n    // Transfer optional values\n    service.setPlanFile(this._planFile);\n    service.setOutFile(this._outFile);\n    service.setParallelism(this._parallelism);\n    service.setLockTimeout(this._lockTimeout);\n  }\n\n  /**\n   * Validate that a command is valid\n   * Subclasses should override this to check against their command list\n   */\n  protected abstract validateCommand(command: string): void;\n}\n","import { IIacProvider } from '../../common/interfaces';\n\n/**\n * Read-only provider interface for Terraform configuration\n * Extends IIacProvider with Terraform-specific command type narrowing\n */\nexport interface ITerraformProvider extends IIacProvider {\n  /** The terraform command to execute (plan, apply, destroy, validate, fmt) */\n  readonly command: TerraformCommand;\n}\n\n/**\n * Supported Terraform commands\n */\nexport type TerraformCommand =\n  | 'init'\n  | 'validate'\n  | 'fmt'\n  | 'plan'\n  | 'apply'\n  | 'destroy'\n  | 'output'\n  | 'show'\n  | 'state'\n  | 'import'\n  | 'refresh'\n  | 'taint'\n  | 'untaint'\n  | 'workspace';\n\n/**\n * Terraform command categories for validation\n */\nexport const TERRAFORM_COMMANDS: readonly TerraformCommand[] = [\n  'init',\n  'validate',\n  'fmt',\n  'plan',\n  'apply',\n  'destroy',\n  'output',\n  'show',\n  'state',\n  'import',\n  'refresh',\n  'taint',\n  'untaint',\n  'workspace',\n] as const;\n","import { TerraformCommand } from '../../terraform/interfaces/ITerraformProvider';\n\n/**\n * Read-only provider interface for shared IaC configuration\n * Captures the common contract between Terraform and Terragrunt providers\n */\nexport interface IIacProvider {\n  /** The IaC command to execute */\n  readonly command: string;\n\n  /** The executor binary */\n  readonly executor: string;\n\n  /** Working directory for operations */\n  readonly workingDirectory: string;\n\n  /** Environment variables for the process */\n  readonly environment: ReadonlyMap<string, string>;\n\n  /** Terraform variables (-var) */\n  readonly variables: ReadonlyMap<string, string>;\n\n  /** Terraform variable files (-var-file) */\n  readonly varFiles: readonly string[];\n\n  /** Backend configuration options (-backend-config) */\n  readonly backendConfig: ReadonlyMap<string, string>;\n\n  /** Target resources for targeted operations (-target) */\n  readonly targets: readonly string[];\n\n  /** Whether auto-approve is enabled (-auto-approve) */\n  readonly autoApprove: boolean;\n\n  /** Whether to run in dry-run mode (no actual execution) */\n  readonly dryRun: boolean;\n\n  /** Plan file path for apply operations */\n  readonly planFile: string | undefined;\n\n  /** Output file path for plan operations (-out) */\n  readonly outFile: string | undefined;\n\n  /** Whether to disable color output (-no-color) */\n  readonly noColor: boolean;\n\n  /** Whether to use compact warnings (-compact-warnings) */\n  readonly compactWarnings: boolean;\n\n  /** Parallelism level (-parallelism) */\n  readonly parallelism: number | undefined;\n\n  /** Lock timeout (-lock-timeout) */\n  readonly lockTimeout: string | undefined;\n\n  /** Whether to refresh state (-refresh) */\n  readonly refresh: boolean;\n\n  /** Whether to reconfigure backend (-reconfigure) */\n  readonly reconfigure: boolean;\n\n  /** Whether to migrate state (-migrate-state) */\n  readonly migrateState: boolean;\n}\n\n/**\n * Commands that support -auto-approve flag\n */\nexport const AUTO_APPROVE_COMMANDS: readonly TerraformCommand[] = ['apply', 'destroy'] as const;\n\n/**\n * Commands that support -target flag\n */\nexport const TARGET_COMMANDS: readonly TerraformCommand[] = [\n  'plan',\n  'apply',\n  'destroy',\n  'refresh',\n  'taint',\n  'untaint',\n] as const;\n\n/**\n * Commands that support -var and -var-file flags\n */\nexport const VARIABLE_COMMANDS: readonly TerraformCommand[] = [\n  'plan',\n  'apply',\n  'destroy',\n  'refresh',\n  'import',\n] as const;\n","import {\n  AUTO_APPROVE_COMMANDS,\n  IIacProvider,\n  TARGET_COMMANDS,\n  VARIABLE_COMMANDS,\n} from '../interfaces';\nimport { TerraformCommand } from '../../terraform/interfaces/ITerraformProvider';\n\n/**\n * Base argument builder for IaC commands\n * Contains shared argument building logic for Terraform-compatible commands\n */\nexport abstract class BaseIacArgumentBuilder {\n  constructor(protected readonly provider: IIacProvider) {}\n\n  /**\n   * Generate command arguments based on provider configuration\n   * @returns Array of command-line arguments\n   */\n  abstract toCommandArgs(): string[];\n\n  /**\n   * Generate full command array including executor and command\n   * @returns Full command array ready for execution\n   */\n  abstract buildCommand(): string[];\n\n  /**\n   * Add all shared Terraform arguments in sequence\n   * Subclasses call this to add the standard terraform argument set\n   */\n  protected addAllSharedArguments(args: string[], command: TerraformCommand): void {\n    this.addInitArguments(args, command);\n    this.addVariableArguments(args, command);\n    this.addTargetArguments(args, command);\n    this.addPlanArguments(args, command);\n    this.addApplyArguments(args, command);\n    this.addCommonArguments(args);\n  }\n\n  /**\n   * Add init-specific arguments\n   */\n  protected addInitArguments(args: string[], command: TerraformCommand): void {\n    if (command !== 'init') return;\n\n    // Backend configuration\n    for (const [key, value] of this.provider.backendConfig.entries()) {\n      args.push('-backend-config', `${key}=${value}`);\n    }\n\n    // Reconfigure flag\n    if (this.provider.reconfigure) {\n      args.push('-reconfigure');\n    }\n\n    // Migrate state flag\n    if (this.provider.migrateState) {\n      args.push('-migrate-state');\n    }\n  }\n\n  /**\n   * Add variable-related arguments (-var, -var-file)\n   */\n  protected addVariableArguments(args: string[], command: TerraformCommand): void {\n    if (!this.supportsVariables(command)) return;\n\n    // Variable files\n    for (const varFile of this.provider.varFiles) {\n      args.push('-var-file', varFile);\n    }\n\n    // Individual variables\n    for (const [key, value] of this.provider.variables.entries()) {\n      args.push('-var', `${key}=${value}`);\n    }\n  }\n\n  /**\n   * Add target-related arguments (-target)\n   */\n  protected addTargetArguments(args: string[], command: TerraformCommand): void {\n    if (!this.supportsTargets(command)) return;\n\n    for (const target of this.provider.targets) {\n      args.push('-target', target);\n    }\n  }\n\n  /**\n   * Add plan-specific arguments\n   */\n  protected addPlanArguments(args: string[], command: TerraformCommand): void {\n    if (command !== 'plan') return;\n\n    // Output file\n    if (this.provider.outFile) {\n      args.push('-out', this.provider.outFile);\n    }\n\n    // Refresh control\n    if (!this.provider.refresh) {\n      args.push('-refresh=false');\n    }\n  }\n\n  /**\n   * Add apply/destroy-specific arguments\n   */\n  protected addApplyArguments(args: string[], command: TerraformCommand): void {\n    if (!this.supportsAutoApprove(command)) return;\n\n    // Auto-approve flag\n    if (this.provider.autoApprove) {\n      args.push('-auto-approve');\n    }\n\n    // Refresh control (for apply/destroy)\n    if (command === 'apply' || command === 'destroy') {\n      if (!this.provider.refresh) {\n        args.push('-refresh=false');\n      }\n    }\n\n    // Plan file for apply (must be last argument, no flag)\n    if (command === 'apply' && this.provider.planFile) {\n      // Plan file is added in addCommonArguments as positional arg\n    }\n  }\n\n  /**\n   * Add common arguments applicable to multiple commands\n   */\n  protected addCommonArguments(args: string[]): void {\n    // Parallelism\n    if (this.provider.parallelism !== undefined) {\n      args.push('-parallelism', String(this.provider.parallelism));\n    }\n\n    // Lock timeout\n    if (this.provider.lockTimeout) {\n      args.push('-lock-timeout', this.provider.lockTimeout);\n    }\n\n    // No color output\n    if (this.provider.noColor) {\n      args.push('-no-color');\n    }\n\n    // Compact warnings\n    if (this.provider.compactWarnings) {\n      args.push('-compact-warnings');\n    }\n\n    // Plan file for apply command (must be positional, not a flag)\n    if (this.provider.command === 'apply' && this.provider.planFile) {\n      args.push(this.provider.planFile);\n    }\n  }\n\n  /**\n   * Check if command supports -var and -var-file flags\n   */\n  protected supportsVariables(command: TerraformCommand): boolean {\n    return VARIABLE_COMMANDS.includes(command);\n  }\n\n  /**\n   * Check if command supports -target flag\n   */\n  protected supportsTargets(command: TerraformCommand): boolean {\n    return TARGET_COMMANDS.includes(command);\n  }\n\n  /**\n   * Check if command supports -auto-approve flag\n   */\n  protected supportsAutoApprove(command: TerraformCommand): boolean {\n    return AUTO_APPROVE_COMMANDS.includes(command);\n  }\n}\n","import { BaseIacArgumentBuilder } from '../../common/services/BaseIacArgumentBuilder';\nimport { ITerraformProvider } from '../interfaces';\n\n/**\n * Builds command-line arguments for Terraform commands\n * Extends BaseIacArgumentBuilder with Terraform-specific command assembly\n */\nexport class TerraformArgumentBuilder extends BaseIacArgumentBuilder {\n  protected override readonly provider: ITerraformProvider;\n\n  constructor(provider: ITerraformProvider) {\n    super(provider);\n    this.provider = provider;\n  }\n\n  /**\n   * Generate command arguments based on provider configuration\n   * @returns Array of command-line arguments\n   */\n  toCommandArgs(): string[] {\n    const args: string[] = [];\n    this.addAllSharedArguments(args, this.provider.command);\n    return args;\n  }\n\n  /**\n   * Generate full command array including executor and command\n   * @returns Full command array ready for execution\n   */\n  buildCommand(): string[] {\n    return [this.provider.executor, this.provider.command, ...this.toCommandArgs()];\n  }\n}\n","import { addUnique, removeItem } from '../../../../libs/utils';\nimport { IIacService } from '../interfaces';\nimport { BaseIacArgumentBuilder } from './BaseIacArgumentBuilder';\nimport { BaseIacStringFormatter } from './BaseIacStringFormatter';\n\n/**\n * Abstract base service implementation for IaC operations\n * Contains all shared state management (17 fields, 18 getters, 24 setters)\n * Subclasses implement factory methods for argument builder and string formatter\n */\nexport abstract class BaseIacService implements IIacService {\n  // Core configuration\n  private _command: string;\n  private _workingDirectory: string;\n  private readonly _executor: string;\n\n  // Environment and variables\n  private readonly _environment: Map<string, string> = new Map();\n  private readonly _variables: Map<string, string> = new Map();\n  private readonly _varFiles: string[] = [];\n  private readonly _backendConfig: Map<string, string> = new Map();\n  private readonly _targets: string[] = [];\n\n  // Flags\n  private _autoApprove: boolean = false;\n  private _dryRun: boolean = false;\n  private _noColor: boolean = false;\n  private _compactWarnings: boolean = false;\n  private _refresh: boolean = true;\n  private _reconfigure: boolean = false;\n  private _migrateState: boolean = false;\n\n  // Optional values\n  private _planFile: string | undefined;\n  private _outFile: string | undefined;\n  private _parallelism: number | undefined;\n  private _lockTimeout: string | undefined;\n\n  // Internal services (lazy-initialized)\n  private _argumentBuilder: BaseIacArgumentBuilder | undefined;\n  private _stringFormatter: BaseIacStringFormatter | undefined;\n\n  protected constructor(command: string, executor: string, workingDirectory: string) {\n    this._command = command;\n    this._executor = executor;\n    this._workingDirectory = workingDirectory;\n  }\n\n  // ============ Factory Methods (Subclass Hooks) ============\n\n  protected abstract createArgumentBuilder(): BaseIacArgumentBuilder;\n  protected abstract createStringFormatter(): BaseIacStringFormatter;\n  protected abstract resetSpecific(): void;\n  protected abstract cloneSpecific(target: this): void;\n  protected abstract createEmptyClone(): this;\n\n  // ============ Lazy Accessors for Internal Services ============\n\n  private get argumentBuilder(): BaseIacArgumentBuilder {\n    if (!this._argumentBuilder) {\n      this._argumentBuilder = this.createArgumentBuilder();\n    }\n    return this._argumentBuilder;\n  }\n\n  private get stringFormatter(): BaseIacStringFormatter {\n    if (!this._stringFormatter) {\n      this._stringFormatter = this.createStringFormatter();\n    }\n    return this._stringFormatter;\n  }\n\n  // ============ IIacProvider Implementation (Read-only) ============\n\n  get command(): string {\n    return this._command;\n  }\n\n  get executor(): string {\n    return this._executor;\n  }\n\n  get workingDirectory(): string {\n    return this._workingDirectory;\n  }\n\n  get environment(): ReadonlyMap<string, string> {\n    return this._environment;\n  }\n\n  get variables(): ReadonlyMap<string, string> {\n    return this._variables;\n  }\n\n  get varFiles(): readonly string[] {\n    return [...this._varFiles];\n  }\n\n  get backendConfig(): ReadonlyMap<string, string> {\n    return this._backendConfig;\n  }\n\n  get targets(): readonly string[] {\n    return [...this._targets];\n  }\n\n  get autoApprove(): boolean {\n    return this._autoApprove;\n  }\n\n  get dryRun(): boolean {\n    return this._dryRun;\n  }\n\n  get planFile(): string | undefined {\n    return this._planFile;\n  }\n\n  get outFile(): string | undefined {\n    return this._outFile;\n  }\n\n  get noColor(): boolean {\n    return this._noColor;\n  }\n\n  get compactWarnings(): boolean {\n    return this._compactWarnings;\n  }\n\n  get parallelism(): number | undefined {\n    return this._parallelism;\n  }\n\n  get lockTimeout(): string | undefined {\n    return this._lockTimeout;\n  }\n\n  get refresh(): boolean {\n    return this._refresh;\n  }\n\n  get reconfigure(): boolean {\n    return this._reconfigure;\n  }\n\n  get migrateState(): boolean {\n    return this._migrateState;\n  }\n\n  // ============ IStringListProvider Implementation ============\n\n  get useStringList(): boolean {\n    return true;\n  }\n\n  get stringList(): string[] {\n    return this.stringFormatter.toStringList();\n  }\n\n  // ============ IIacService Implementation (Mutators) ============\n\n  setCommand(command: string): this {\n    this._command = command;\n    return this;\n  }\n\n  setWorkingDirectory(directory: string): this {\n    this._workingDirectory = directory;\n    return this;\n  }\n\n  addEnvironmentVariable(key: string, value: string): this {\n    this._environment.set(key, value);\n    return this;\n  }\n\n  removeEnvironmentVariable(key: string): this {\n    this._environment.delete(key);\n    return this;\n  }\n\n  clearEnvironmentVariables(): this {\n    this._environment.clear();\n    return this;\n  }\n\n  addVariable(key: string, value: string): this {\n    this._variables.set(key, value);\n    return this;\n  }\n\n  removeVariable(key: string): this {\n    this._variables.delete(key);\n    return this;\n  }\n\n  clearVariables(): this {\n    this._variables.clear();\n    return this;\n  }\n\n  addVarFile(filePath: string): this {\n    addUnique(this._varFiles, filePath);\n    return this;\n  }\n\n  removeVarFile(filePath: string): this {\n    removeItem(this._varFiles, filePath);\n    return this;\n  }\n\n  clearVarFiles(): this {\n    this._varFiles.length = 0;\n    return this;\n  }\n\n  addBackendConfig(key: string, value: string): this {\n    this._backendConfig.set(key, value);\n    return this;\n  }\n\n  removeBackendConfig(key: string): this {\n    this._backendConfig.delete(key);\n    return this;\n  }\n\n  clearBackendConfig(): this {\n    this._backendConfig.clear();\n    return this;\n  }\n\n  addTarget(target: string): this {\n    addUnique(this._targets, target);\n    return this;\n  }\n\n  removeTarget(target: string): this {\n    removeItem(this._targets, target);\n    return this;\n  }\n\n  clearTargets(): this {\n    this._targets.length = 0;\n    return this;\n  }\n\n  setAutoApprove(enabled: boolean): this {\n    this._autoApprove = enabled;\n    return this;\n  }\n\n  setDryRun(enabled: boolean): this {\n    this._dryRun = enabled;\n    return this;\n  }\n\n  setPlanFile(filePath: string | undefined): this {\n    this._planFile = filePath;\n    return this;\n  }\n\n  setOutFile(filePath: string | undefined): this {\n    this._outFile = filePath;\n    return this;\n  }\n\n  setNoColor(enabled: boolean): this {\n    this._noColor = enabled;\n    return this;\n  }\n\n  setCompactWarnings(enabled: boolean): this {\n    this._compactWarnings = enabled;\n    return this;\n  }\n\n  setParallelism(level: number | undefined): this {\n    this._parallelism = level;\n    return this;\n  }\n\n  setLockTimeout(timeout: string | undefined): this {\n    this._lockTimeout = timeout;\n    return this;\n  }\n\n  setRefresh(enabled: boolean): this {\n    this._refresh = enabled;\n    return this;\n  }\n\n  setReconfigure(enabled: boolean): this {\n    this._reconfigure = enabled;\n    return this;\n  }\n\n  setMigrateState(enabled: boolean): this {\n    this._migrateState = enabled;\n    return this;\n  }\n\n  // ============ Command Generation Methods ============\n\n  toCommandArgs(): string[] {\n    return this.argumentBuilder.toCommandArgs();\n  }\n\n  buildCommand(): string[] {\n    return this.argumentBuilder.buildCommand();\n  }\n\n  toString(): string {\n    return this.stringFormatter.toString();\n  }\n\n  toStringMultiLineCommand(): string {\n    return this.stringFormatter.toStringMultiLineCommand();\n  }\n\n  // ============ Utility Methods ============\n\n  reset(): this {\n    this._environment.clear();\n    this._variables.clear();\n    this._varFiles.length = 0;\n    this._backendConfig.clear();\n    this._targets.length = 0;\n    this._autoApprove = false;\n    this._dryRun = false;\n    this._noColor = false;\n    this._compactWarnings = false;\n    this._refresh = true;\n    this._reconfigure = false;\n    this._migrateState = false;\n    this._planFile = undefined;\n    this._outFile = undefined;\n    this._parallelism = undefined;\n    this._lockTimeout = undefined;\n    this.resetSpecific();\n    return this;\n  }\n\n  clone(): IIacService {\n    const cloned = this.createEmptyClone();\n\n    // Copy environment\n    for (const [key, value] of this._environment.entries()) {\n      cloned.addEnvironmentVariable(key, value);\n    }\n\n    // Copy variables\n    for (const [key, value] of this._variables.entries()) {\n      cloned.addVariable(key, value);\n    }\n\n    // Copy var files\n    for (const varFile of this._varFiles) {\n      cloned.addVarFile(varFile);\n    }\n\n    // Copy backend config\n    for (const [key, value] of this._backendConfig.entries()) {\n      cloned.addBackendConfig(key, value);\n    }\n\n    // Copy targets\n    for (const target of this._targets) {\n      cloned.addTarget(target);\n    }\n\n    // Copy flags\n    cloned.setAutoApprove(this._autoApprove);\n    cloned.setDryRun(this._dryRun);\n    cloned.setNoColor(this._noColor);\n    cloned.setCompactWarnings(this._compactWarnings);\n    cloned.setRefresh(this._refresh);\n    cloned.setReconfigure(this._reconfigure);\n    cloned.setMigrateState(this._migrateState);\n\n    // Copy optional values\n    cloned.setPlanFile(this._planFile);\n    cloned.setOutFile(this._outFile);\n    cloned.setParallelism(this._parallelism);\n    cloned.setLockTimeout(this._lockTimeout);\n\n    // Copy subclass-specific state\n    this.cloneSpecific(cloned);\n\n    return cloned;\n  }\n}\n","/**\n * Interface for argument builders that can produce command arrays\n */\nexport interface ICommandBuilder {\n  buildCommand(): string[];\n}\n\n/**\n * Base string formatter for IaC commands\n * Formats command arrays as single-line, multi-line, or string list representations\n */\nexport class BaseIacStringFormatter {\n  constructor(private readonly commandBuilder: ICommandBuilder) {}\n\n  /**\n   * Generate command as a single-line string\n   * @returns Space-separated command string\n   */\n  toString(): string {\n    const command = this.commandBuilder.buildCommand();\n    return command.map(arg => this.escapeArg(arg)).join(' ');\n  }\n\n  /**\n   * Generate command as multi-line string with backslash continuations\n   * Suitable for shell scripts and documentation\n   * @returns Multi-line command string\n   */\n  toStringMultiLineCommand(): string {\n    const command = this.commandBuilder.buildCommand();\n    if (command.length === 0) return '';\n\n    const lines: string[] = [];\n\n    for (let i = 0; i < command.length; i++) {\n      const currentArg = command[i]!;\n      const arg = this.escapeArg(currentArg);\n      const isLast = i === command.length - 1;\n\n      // Check if this is a flag with a value\n      const nextArg = command[i + 1];\n      if (arg.startsWith('-') && !isLast && nextArg && !nextArg.startsWith('-')) {\n        // Flag with value - keep them together\n        const value = this.escapeArg(nextArg);\n        lines.push(`  ${arg} ${value}` + (i + 1 === command.length - 1 ? '' : ' \\\\'));\n        i++; // Skip the value in next iteration\n      } else if (i === 0) {\n        // Executor\n        lines.push(arg + ' \\\\');\n      } else if (i === 1) {\n        // Command\n        lines.push(`  ${arg}` + (isLast ? '' : ' \\\\'));\n      } else {\n        // Standalone argument\n        lines.push(`  ${arg}` + (isLast ? '' : ' \\\\'));\n      }\n    }\n\n    return lines.join('\\n');\n  }\n\n  /**\n   * Generate a string list\n   * @returns Array of strings suitable for StringListProvider\n   */\n  toStringList(): string[] {\n    return this.commandBuilder.buildCommand();\n  }\n\n  /**\n   * Escape an argument for shell safety\n   * @param arg - Argument to escape\n   * @returns Escaped argument\n   */\n  private escapeArg(arg: string): string {\n    if (/[\\s\"'\\\\$`]/.test(arg)) {\n      return `\"${arg.replace(/\"/g, '\\\\\"')}\"`;\n    }\n    return arg;\n  }\n}\n","import { BaseIacStringFormatter } from '../../common/services/BaseIacStringFormatter';\nimport { ITerraformProvider } from '../interfaces';\nimport { TerraformArgumentBuilder } from './TerraformArgumentBuilder';\n\n/**\n * Formats Terraform commands as strings for display and debugging\n * Delegates to BaseIacStringFormatter with a TerraformArgumentBuilder\n */\nexport class TerraformStringFormatter extends BaseIacStringFormatter {\n  constructor(provider: ITerraformProvider) {\n    super(new TerraformArgumentBuilder(provider));\n  }\n}\n","import { BaseIacService } from '../../common/services/BaseIacService';\nimport { ITerraformService, TerraformCommand } from '../interfaces';\nimport { TerraformArgumentBuilder } from './TerraformArgumentBuilder';\nimport { TerraformStringFormatter } from './TerraformStringFormatter';\n\n/**\n * Main service implementation for Terraform operations\n * Extends BaseIacService with Terraform-specific factory methods\n */\nexport class TerraformService extends BaseIacService implements ITerraformService {\n  constructor(command: TerraformCommand, workingDirectory: string = '.') {\n    super(command, 'terraform', workingDirectory);\n  }\n\n  // ============ Type-Narrowed Accessors ============\n\n  override get command(): TerraformCommand {\n    return super.command as TerraformCommand;\n  }\n\n  override setCommand(command: TerraformCommand): this {\n    return super.setCommand(command);\n  }\n\n  // ============ Factory Method Implementations ============\n\n  protected createArgumentBuilder(): TerraformArgumentBuilder {\n    return new TerraformArgumentBuilder(this);\n  }\n\n  protected createStringFormatter(): TerraformStringFormatter {\n    return new TerraformStringFormatter(this);\n  }\n\n  protected resetSpecific(): void {\n    // No additional state to reset for Terraform\n  }\n\n  protected cloneSpecific(_target: this): void {\n    // No additional state to clone for Terraform\n  }\n\n  protected createEmptyClone(): this {\n    return new TerraformService(this.command, this.workingDirectory) as this;\n  }\n\n  // ============ Clone Override for Return Type ============\n\n  override clone(): ITerraformService {\n    return super.clone() as ITerraformService;\n  }\n}\n","import { BaseIacBuilder } from '../common/BaseIacBuilder';\nimport {\n  ITerraformBuilder,\n  ITerraformService,\n  TERRAFORM_COMMANDS,\n  TerraformCommand,\n} from './interfaces';\nimport { TerraformService } from './services';\n\n/**\n * Fluent builder for constructing Terraform service instances\n * Extends BaseIacBuilder — only contains static factories and build()\n */\nexport class TerraformBuilder\n  extends BaseIacBuilder<TerraformCommand, ITerraformService>\n  implements ITerraformBuilder\n{\n  /**\n   * Private constructor - use static factory methods\n   */\n  private constructor() {\n    super();\n  }\n\n  // ============ Static Factory Methods ============\n\n  static create(command?: TerraformCommand): TerraformBuilder {\n    const builder = new TerraformBuilder();\n    if (command) {\n      builder.withCommand(command);\n    }\n    return builder;\n  }\n\n  static forInit(): TerraformBuilder {\n    return TerraformBuilder.create('init');\n  }\n\n  static forValidate(): TerraformBuilder {\n    return TerraformBuilder.create('validate');\n  }\n\n  static forFmt(): TerraformBuilder {\n    return TerraformBuilder.create('fmt');\n  }\n\n  static forPlan(): TerraformBuilder {\n    return TerraformBuilder.create('plan');\n  }\n\n  static forApply(): TerraformBuilder {\n    return TerraformBuilder.create('apply');\n  }\n\n  static forDestroy(): TerraformBuilder {\n    return TerraformBuilder.create('destroy');\n  }\n\n  static forOutput(): TerraformBuilder {\n    return TerraformBuilder.create('output');\n  }\n\n  static forShow(): TerraformBuilder {\n    return TerraformBuilder.create('show');\n  }\n\n  // ============ Build ============\n\n  build(): ITerraformService {\n    if (!this._command) {\n      throw new Error(\n        'Terraform command is required. Use withCommand() or a static factory method.',\n      );\n    }\n\n    const service = new TerraformService(this._command, this._workingDirectory);\n    this.transferSharedState(service);\n    return service;\n  }\n\n  // ============ Protected Overrides ============\n\n  protected resetSpecific(): void {\n    // No additional state to reset for Terraform\n  }\n\n  protected validateCommand(command: string): void {\n    if (!TERRAFORM_COMMANDS.includes(command as TerraformCommand)) {\n      throw new Error(\n        `Invalid Terraform command: ${command}. Valid commands are: ${TERRAFORM_COMMANDS.join(', ')}`,\n      );\n    }\n  }\n}\n","import type { IAgent } from '../../agents/interfaces';\nimport type { TerraformCommand } from '../../actions/iac/terraform/interfaces';\nimport { parseCommaSeparated, parseJsonObject } from '../../libs/utils';\n\n/**\n * Input settings for Terraform operations\n */\nexport interface ITerraformSettings {\n  command: TerraformCommand;\n  workingDirectory: string;\n  terraformVersion: string;\n  terraformVersionFile: string;\n  variables: Record<string, string>;\n  varFiles: string[];\n  backendConfig: Record<string, string>;\n  targets: string[];\n  autoApprove: boolean;\n  planFile: string;\n  noColor: boolean;\n  compactWarnings: boolean;\n  parallelism: string;\n  lockTimeout: string;\n  refresh: string;\n  reconfigure: boolean;\n  migrateState: boolean;\n  dryRun: boolean;\n}\n\n/**\n * Get Terraform settings from agent inputs\n */\nexport function getSettings(agent: IAgent): ITerraformSettings {\n  return {\n    command: agent.getInput('command', true) as TerraformCommand,\n    workingDirectory: agent.getInput('working-directory') || '.',\n    terraformVersion: agent.getInput('terraform-version'),\n    terraformVersionFile: agent.getInput('terraform-version-file') || '.terraform-version',\n    variables: parseJsonObject(agent.getInput('variables')),\n    varFiles: parseCommaSeparated(agent.getInput('var-files')),\n    backendConfig: parseJsonObject(agent.getInput('backend-config')),\n    targets: parseCommaSeparated(agent.getInput('targets')),\n    autoApprove: agent.getBooleanInput('auto-approve'),\n    planFile: agent.getInput('plan-file'),\n    noColor: agent.getBooleanInput('no-color'),\n    compactWarnings: agent.getBooleanInput('compact-warnings'),\n    parallelism: agent.getInput('parallelism'),\n    lockTimeout: agent.getInput('lock-timeout'),\n    refresh: agent.getInput('refresh'),\n    reconfigure: agent.getBooleanInput('reconfigure'),\n    migrateState: agent.getBooleanInput('migrate-state'),\n    dryRun: agent.getBooleanInput('dry-run'),\n  };\n}\n","/**\n * Platform detection for binary downloads.\n * Maps Node.js process.platform/arch to the naming conventions used by\n * HashiCorp (Terraform) and Gruntwork (Terragrunt) release artifacts.\n */\n\nexport interface PlatformInfo {\n  readonly os: 'linux' | 'darwin' | 'windows';\n  readonly arch: 'amd64' | 'arm64';\n}\n\nconst SUPPORTED_PLATFORMS: ReadonlySet<string> = new Set(['linux', 'darwin', 'win32']);\n\nconst SUPPORTED_ARCHES: ReadonlySet<string> = new Set(['x64', 'arm64']);\n\n/**\n * Detect the current platform and architecture.\n * Throws if the platform is unsupported.\n */\nexport function getPlatform(): PlatformInfo {\n  if (!SUPPORTED_PLATFORMS.has(process.platform)) {\n    throw new Error(\n      `Unsupported platform: ${process.platform}. Supported: linux, darwin, windows.`,\n    );\n  }\n  if (!SUPPORTED_ARCHES.has(process.arch)) {\n    throw new Error(`Unsupported architecture: ${process.arch}. Supported: x64 (amd64), arm64.`);\n  }\n\n  const os = process.platform === 'win32' ? 'windows' : (process.platform as 'linux' | 'darwin');\n  const arch = process.arch === 'arm64' ? 'arm64' : 'amd64';\n\n  return { os, arch };\n}\n\n/**\n * Get the cache directory for tool installations.\n * Prefers $RUNNER_TOOL_CACHE (GitHub Actions) with fallback to $HOME.\n */\nexport function getCacheDir(toolName: string, version: string): string {\n  const base =\n    process.env['RUNNER_TOOL_CACHE'] || `${process.env['HOME'] ?? '/tmp'}/.tool-versions`;\n  const { arch } = getPlatform();\n  return `${base}/${toolName}/${version}/${arch}`;\n}\n","import type { IToolAgent, SemVer } from './interfaces';\n\n/**\n * Module-level cache: one --version call per tool per action run.\n * Safe because a GitHub Actions step runs in a single process.\n */\nconst versionCache = new Map<string, SemVer>();\n\n/** Regex for Terraform version output: \"Terraform v1.9.8 on linux_amd64\" */\nconst TERRAFORM_VERSION_RE = /Terraform\\s+v(\\d+)\\.(\\d+)\\.(\\d+)/;\n\n/** Regex for Terragrunt version output: \"terragrunt version v0.75.10\" */\nconst TERRAGRUNT_VERSION_RE = /terragrunt\\s+version\\s+v(\\d+)\\.(\\d+)\\.(\\d+)/i;\n\n/**\n * Parse a version string from CLI output using the given regex.\n * @returns SemVer or throws if the output doesn't match.\n */\nfunction parseVersion(output: string, pattern: RegExp, toolName: string): SemVer {\n  const match = pattern.exec(output);\n  if (!match?.[1] || !match[2] || !match[3]) {\n    throw new Error(`Failed to parse ${toolName} version from output: ${output.slice(0, 200)}`);\n  }\n  return {\n    major: parseInt(match[1], 10),\n    minor: parseInt(match[2], 10),\n    patch: parseInt(match[3], 10),\n    raw: `${match[1]}.${match[2]}.${match[3]}`,\n  };\n}\n\n/**\n * Detect the installed Terraform version.\n * Result is cached per action run (one --version invocation per tool).\n *\n * Uses agent.exec() — the IToolAgent adapter method,\n * NOT child_process. This is safe execFile-based execution.\n */\nexport async function detectTerraformVersion(agent: IToolAgent): Promise<SemVer> {\n  const cached = versionCache.get('terraform');\n  if (cached) {\n    return cached;\n  }\n\n  const result = await agent.exec('terraform', ['--version'], {\n    silent: true,\n    ignoreReturnCode: true,\n  });\n\n  if (result.exitCode !== 0) {\n    throw new Error(`terraform --version failed (exit ${result.exitCode}): ${result.stderr}`);\n  }\n\n  const version = parseVersion(result.stdout, TERRAFORM_VERSION_RE, 'Terraform');\n  versionCache.set('terraform', version);\n  return version;\n}\n\n/**\n * Detect the installed Terragrunt version.\n * Result is cached per action run (one --version invocation per tool).\n *\n * Uses agent.exec() — the IToolAgent adapter method,\n * NOT child_process. This is safe execFile-based execution.\n */\nexport async function detectTerragruntVersion(agent: IToolAgent): Promise<SemVer> {\n  const cached = versionCache.get('terragrunt');\n  if (cached) {\n    return cached;\n  }\n\n  const result = await agent.exec('terragrunt', ['--version'], {\n    silent: true,\n    ignoreReturnCode: true,\n  });\n\n  if (result.exitCode !== 0) {\n    throw new Error(`terragrunt --version failed (exit ${result.exitCode}): ${result.stderr}`);\n  }\n\n  const version = parseVersion(result.stdout, TERRAGRUNT_VERSION_RE, 'Terragrunt');\n  versionCache.set('terragrunt', version);\n  return version;\n}\n\n/**\n * Check if the detected version is Terragrunt v1.x or later (CLI redesign).\n */\nexport function isV1OrLater(version: SemVer): boolean {\n  return version.major >= 1;\n}\n\n/**\n * Clear the version cache. Primarily for testing.\n */\nexport function clearVersionCache(): void {\n  versionCache.clear();\n}\n","import { readFile } from 'node:fs/promises';\nimport { dirname, join, resolve } from 'node:path';\nimport { homedir } from 'node:os';\n\nimport type { IVersionFileReader } from './interfaces';\n\n/**\n * Reads version files (e.g., .terraform-version, .terragrunt-version)\n * by walking up the directory tree from the starting directory.\n *\n * Compatible with tfenv and tgenv version file conventions.\n */\nexport class VersionFileReader implements IVersionFileReader {\n  /**\n   * Walk from startDir upward looking for the version file.\n   * Stops at the filesystem root or $HOME.\n   *\n   * @param startDir - Directory to start searching from\n   * @param fileName - Version file name (e.g., '.terraform-version')\n   * @returns The version string from the file, or undefined if not found\n   */\n  async read(startDir: string, fileName: string): Promise<string | undefined> {\n    const home = homedir();\n    let currentDir = resolve(startDir);\n\n    // Walk upward through parent directories\n\n    while (true) {\n      const filePath = join(currentDir, fileName);\n\n      try {\n        const content = await readFile(filePath, 'utf-8');\n        const version = this.parseVersionFile(content);\n        if (version) {\n          return version;\n        }\n      } catch {\n        // File doesn't exist at this level, continue walking up\n      }\n\n      // Stop conditions: reached home directory or filesystem root\n      const parentDir = dirname(currentDir);\n      if (currentDir === home || parentDir === currentDir) {\n        break;\n      }\n\n      currentDir = parentDir;\n    }\n\n    // Also check home directory as a last resort (tfenv convention)\n    if (resolve(startDir) !== home) {\n      const homeFilePath = join(home, fileName);\n      try {\n        const content = await readFile(homeFilePath, 'utf-8');\n        return this.parseVersionFile(content);\n      } catch {\n        // Not found in home either\n      }\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Parse the version file content.\n   * Returns the first non-empty, non-comment line, trimmed.\n   */\n  private parseVersionFile(content: string): string | undefined {\n    const lines = content.split('\\n');\n    for (const line of lines) {\n      const trimmed = line.trim();\n      // Skip empty lines and comments\n      if (trimmed && !trimmed.startsWith('#')) {\n        return trimmed;\n      }\n    }\n    return undefined;\n  }\n}\n","import { existsSync } from 'node:fs';\nimport { chmod, mkdir, unlink, writeFile } from 'node:fs/promises';\nimport { join } from 'node:path';\n\nimport type {\n  IToolAgent,\n  IVersionFileReader,\n  IVersionInstaller,\n  IVersionResolver,\n  VersionSpec,\n} from './interfaces';\nimport { getCacheDir, getPlatform } from './platform';\n\n/** Matches an exact semver version without prerelease suffix */\nconst VERSION_REGEX = /^\\d+\\.\\d+\\.\\d+$/;\n\n/** HashiCorp Terraform releases base URL */\nconst HASHICORP_RELEASES_URL = 'https://releases.hashicorp.com/terraform';\n\n/**\n * Compare two semver version strings in descending order.\n * Both strings must be in x.y.z format (validated before calling).\n */\nfunction compareSemverDesc(a: string, b: string): number {\n  const ap = a.split('.').map(Number);\n  const bp = b.split('.').map(Number);\n  return bp[0]! - ap[0]! || bp[1]! - ap[1]! || bp[2]! - ap[2]!;\n}\n\n/**\n * Resolves a Terraform version spec to a concrete version string.\n *\n * Resolution priority:\n * 1. `version` is 'skip' → return undefined (do not install)\n * 2. `version` is 'x.y.z' → return as-is\n * 3. `version` is 'latest' → fetch from HashiCorp releases index\n * 4. `version` is empty → read version file → resolve from file or latest\n *\n * Compatible with tfenv `.terraform-version` file conventions.\n */\nexport class TerraformVersionResolver implements IVersionResolver {\n  constructor(private readonly fileReader: IVersionFileReader) {}\n\n  async resolve(\n    version: string,\n    versionFile: string,\n    workingDirectory: string,\n  ): Promise<VersionSpec | undefined> {\n    const trimmed = version.trim();\n\n    // Skip installation\n    if (trimmed === 'skip') {\n      return undefined;\n    }\n\n    // Exact version from input\n    if (VERSION_REGEX.test(trimmed)) {\n      return { input: trimmed, resolved: trimmed, source: 'input' };\n    }\n\n    // Explicit latest\n    if (trimmed === 'latest') {\n      const latest = await this.fetchLatestVersion();\n      return { input: trimmed, resolved: latest, source: 'latest' };\n    }\n\n    // Empty: try version file, then fall back to latest\n    if (trimmed === '') {\n      const fileVersion = await this.fileReader.read(workingDirectory, versionFile);\n      if (fileVersion) {\n        return this.resolveFileVersion(fileVersion, versionFile);\n      }\n      // No file found → latest\n      const latest = await this.fetchLatestVersion();\n      return { input: 'latest', resolved: latest, source: 'latest' };\n    }\n\n    // Unknown spec\n    throw new Error(\n      `Invalid terraform version spec: '${trimmed}'. ` + \"Use 'x.y.z', 'latest', or 'skip'.\",\n    );\n  }\n\n  /**\n   * Resolve a version string read from a version file.\n   * Supports: 'skip', 'latest', and exact 'x.y.z' specs.\n   */\n  private async resolveFileVersion(\n    fileVersion: string,\n    versionFile: string,\n  ): Promise<VersionSpec | undefined> {\n    if (fileVersion === 'skip') {\n      return undefined;\n    }\n\n    if (fileVersion === 'latest') {\n      const latest = await this.fetchLatestVersion();\n      return { input: fileVersion, resolved: latest, source: 'file' };\n    }\n\n    if (VERSION_REGEX.test(fileVersion)) {\n      return { input: fileVersion, resolved: fileVersion, source: 'file' };\n    }\n\n    throw new Error(\n      `Invalid version in ${versionFile}: '${fileVersion}'. ` + \"Use 'x.y.z', 'latest', or 'skip'.\",\n    );\n  }\n\n  /**\n   * Fetch the latest stable Terraform version from the HashiCorp releases index.\n   * Filters out prerelease versions (alpha, beta, rc).\n   */\n  private async fetchLatestVersion(): Promise<string> {\n    const response = await fetch(`${HASHICORP_RELEASES_URL}/index.json`);\n    if (!response.ok) {\n      throw new Error(\n        `Failed to fetch Terraform version index: ` + `${response.status} ${response.statusText}`,\n      );\n    }\n\n    const data = (await response.json()) as {\n      versions: Record<string, unknown>;\n    };\n\n    const versions = Object.keys(data.versions)\n      .filter(v => VERSION_REGEX.test(v))\n      .sort(compareSemverDesc);\n\n    if (versions.length === 0) {\n      throw new Error('No stable Terraform versions found in the version index');\n    }\n\n    return versions[0]!;\n  }\n}\n\n/**\n * Downloads and installs Terraform binaries from HashiCorp releases.\n *\n * Uses the GitHub Actions tool cache directory ($RUNNER_TOOL_CACHE) when\n * available, with a fallback to $HOME/.tool-versions for local development.\n *\n * Extraction uses the `unzip` command via agent's IToolAgent adapter\n * method — NOT child_process. This is safe execFile-based invocation.\n */\nexport class TerraformVersionInstaller implements IVersionInstaller {\n  async isInstalled(version: string): Promise<boolean> {\n    const dir = getCacheDir('terraform', version);\n    const binaryName = getPlatform().os === 'windows' ? 'terraform.exe' : 'terraform';\n    return existsSync(join(dir, binaryName));\n  }\n\n  async install(version: string, agent: IToolAgent): Promise<string> {\n    const cacheDir = getCacheDir('terraform', version);\n\n    if (await this.isInstalled(version)) {\n      agent.info(`Terraform ${version} already cached at ${cacheDir}`);\n      return cacheDir;\n    }\n\n    const { os, arch } = getPlatform();\n    const zipName = `terraform_${version}_${os}_${arch}.zip`;\n    const url = `${HASHICORP_RELEASES_URL}/${version}/${zipName}`;\n\n    agent.info(`Downloading Terraform ${version} from ${url}`);\n\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(\n        `Failed to download Terraform ${version}: ` + `${response.status} ${response.statusText}`,\n      );\n    }\n\n    // Create cache directory\n    await mkdir(cacheDir, { recursive: true });\n\n    // Write zip to temporary location in the cache directory\n    const zipPath = join(cacheDir, zipName);\n    const buffer = Buffer.from(await response.arrayBuffer());\n    await writeFile(zipPath, buffer);\n\n    // Extract zip — uses the IToolAgent adapter (execFile-based, not shell)\n    const result = await agent.exec('unzip', ['-o', zipPath, '-d', cacheDir], {\n      silent: true,\n    });\n\n    if (result.exitCode !== 0) {\n      throw new Error(`Failed to extract Terraform ${version}: ${result.stderr}`);\n    }\n\n    // Clean up zip file\n    await unlink(zipPath);\n\n    // Ensure binary is executable\n    const binaryName = os === 'windows' ? 'terraform.exe' : 'terraform';\n    await chmod(join(cacheDir, binaryName), 0o755);\n\n    agent.info(`Terraform ${version} installed to ${cacheDir}`);\n    return cacheDir;\n  }\n}\n","import { existsSync } from 'node:fs';\nimport { chmod, mkdir, writeFile } from 'node:fs/promises';\nimport { join } from 'node:path';\n\nimport type {\n  IToolAgent,\n  IVersionFileReader,\n  IVersionInstaller,\n  IVersionResolver,\n  VersionSpec,\n} from './interfaces';\nimport { getCacheDir, getPlatform } from './platform';\n\n/** Matches an exact semver version without prerelease suffix */\nconst VERSION_REGEX = /^\\d+\\.\\d+\\.\\d+$/;\n\n/** GitHub Releases API endpoint for Terragrunt */\nconst TERRAGRUNT_LATEST_URL =\n  'https://api.github.com/repos/gruntwork-io/terragrunt/releases/latest';\n\n/** GitHub Releases download base URL */\nconst TERRAGRUNT_DOWNLOAD_URL = 'https://github.com/gruntwork-io/terragrunt/releases/download';\n\n/**\n * Resolves a Terragrunt version spec to a concrete version string.\n *\n * Resolution priority:\n * 1. `version` is 'skip' → return undefined (do not install)\n * 2. `version` is 'x.y.z' → return as-is\n * 3. `version` is 'latest' → fetch from GitHub Releases API\n * 4. `version` is empty → read version file → resolve from file or latest\n *\n * Compatible with tgenv `.terragrunt-version` file conventions.\n */\nexport class TerragruntVersionResolver implements IVersionResolver {\n  constructor(private readonly fileReader: IVersionFileReader) {}\n\n  async resolve(\n    version: string,\n    versionFile: string,\n    workingDirectory: string,\n  ): Promise<VersionSpec | undefined> {\n    const trimmed = version.trim();\n\n    // Skip installation\n    if (trimmed === 'skip') {\n      return undefined;\n    }\n\n    // Exact version from input\n    if (VERSION_REGEX.test(trimmed)) {\n      return { input: trimmed, resolved: trimmed, source: 'input' };\n    }\n\n    // Explicit latest\n    if (trimmed === 'latest') {\n      const latest = await this.fetchLatestVersion();\n      return { input: trimmed, resolved: latest, source: 'latest' };\n    }\n\n    // Empty: try version file, then fall back to latest\n    if (trimmed === '') {\n      const fileVersion = await this.fileReader.read(workingDirectory, versionFile);\n      if (fileVersion) {\n        return this.resolveFileVersion(fileVersion, versionFile);\n      }\n      // No file found → latest\n      const latest = await this.fetchLatestVersion();\n      return { input: 'latest', resolved: latest, source: 'latest' };\n    }\n\n    // Unknown spec\n    throw new Error(\n      `Invalid terragrunt version spec: '${trimmed}'. ` + \"Use 'x.y.z', 'latest', or 'skip'.\",\n    );\n  }\n\n  /**\n   * Resolve a version string read from a version file.\n   * Supports: 'skip', 'latest', and exact 'x.y.z' specs.\n   */\n  private async resolveFileVersion(\n    fileVersion: string,\n    versionFile: string,\n  ): Promise<VersionSpec | undefined> {\n    if (fileVersion === 'skip') {\n      return undefined;\n    }\n\n    if (fileVersion === 'latest') {\n      const latest = await this.fetchLatestVersion();\n      return { input: fileVersion, resolved: latest, source: 'file' };\n    }\n\n    if (VERSION_REGEX.test(fileVersion)) {\n      return { input: fileVersion, resolved: fileVersion, source: 'file' };\n    }\n\n    throw new Error(\n      `Invalid version in ${versionFile}: '${fileVersion}'. ` + \"Use 'x.y.z', 'latest', or 'skip'.\",\n    );\n  }\n\n  /**\n   * Fetch the latest stable Terragrunt version from the GitHub Releases API.\n   * Strips the 'v' prefix from the tag name.\n   *\n   * Note: GitHub API has a 60 req/hour rate limit for unauthenticated calls.\n   * If you hit rate limits in CI, set the GITHUB_TOKEN environment variable\n   * or pre-specify an exact version.\n   */\n  private async fetchLatestVersion(): Promise<string> {\n    const headers: Record<string, string> = {\n      Accept: 'application/vnd.github.v3+json',\n      'User-Agent': 'elioetibr/actions',\n    };\n\n    // Use GITHUB_TOKEN if available to avoid rate limits\n    const token = process.env['GITHUB_TOKEN'];\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    const response = await fetch(TERRAGRUNT_LATEST_URL, { headers });\n    if (!response.ok) {\n      const hint =\n        response.status === 403\n          ? ' (GitHub API rate limit — set GITHUB_TOKEN to increase the limit)'\n          : '';\n      throw new Error(\n        `Failed to fetch latest Terragrunt version: ` +\n          `${response.status} ${response.statusText}${hint}`,\n      );\n    }\n\n    const data = (await response.json()) as { tag_name: string };\n    const tag = data.tag_name;\n\n    // Strip 'v' prefix: \"v1.2.3\" → \"1.2.3\"\n    const version = tag.startsWith('v') ? tag.slice(1) : tag;\n\n    if (!VERSION_REGEX.test(version)) {\n      throw new Error(`Unexpected Terragrunt latest version format: '${tag}'`);\n    }\n\n    return version;\n  }\n}\n\n/**\n * Downloads and installs Terragrunt binaries from GitHub Releases.\n *\n * Terragrunt releases are standalone binaries (no archive extraction needed).\n * The binary is downloaded directly and made executable.\n *\n * Uses the GitHub Actions tool cache directory ($RUNNER_TOOL_CACHE) when\n * available, with a fallback to $HOME/.tool-versions for local development.\n */\nexport class TerragruntVersionInstaller implements IVersionInstaller {\n  async isInstalled(version: string): Promise<boolean> {\n    const dir = getCacheDir('terragrunt', version);\n    const binaryName = getPlatform().os === 'windows' ? 'terragrunt.exe' : 'terragrunt';\n    return existsSync(join(dir, binaryName));\n  }\n\n  async install(version: string, agent: IToolAgent): Promise<string> {\n    const cacheDir = getCacheDir('terragrunt', version);\n\n    if (await this.isInstalled(version)) {\n      agent.info(`Terragrunt ${version} already cached at ${cacheDir}`);\n      return cacheDir;\n    }\n\n    const { os, arch } = getPlatform();\n    const binaryName = os === 'windows' ? 'terragrunt.exe' : 'terragrunt';\n    const downloadName = `terragrunt_${os}_${arch}`;\n    const url = `${TERRAGRUNT_DOWNLOAD_URL}/v${version}/${downloadName}`;\n\n    agent.info(`Downloading Terragrunt ${version} from ${url}`);\n\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(\n        `Failed to download Terragrunt ${version}: ` + `${response.status} ${response.statusText}`,\n      );\n    }\n\n    // Create cache directory\n    await mkdir(cacheDir, { recursive: true });\n\n    // Write binary directly (Terragrunt is a standalone binary, no extraction)\n    const binaryPath = join(cacheDir, binaryName);\n    const buffer = Buffer.from(await response.arrayBuffer());\n    await writeFile(binaryPath, buffer);\n\n    // Make binary executable\n    await chmod(binaryPath, 0o755);\n\n    agent.info(`Terragrunt ${version} installed to ${cacheDir}`);\n    return cacheDir;\n  }\n}\n","import type { IAgent, IRunnerResult } from '../../agents/interfaces';\nimport { RunnerBase } from '../common/runner-base';\nimport { TerraformBuilder } from '../../actions/iac/terraform/TerraformBuilder';\nimport { getSettings } from './settings';\nimport {\n  TerraformVersionResolver,\n  TerraformVersionInstaller,\n  VersionFileReader,\n} from '../../libs/version-manager';\nimport {\n  setupToolVersion,\n  configureSharedIacBuilder,\n  executeIacCommand,\n} from '../common/iac-helpers';\n\n// Module-level singletons — reused across invocations within the same action run\nconst fileReader = new VersionFileReader();\nconst resolver = new TerraformVersionResolver(fileReader);\nconst installer = new TerraformVersionInstaller();\n\n/**\n * Terraform runner\n * Handles command generation and execution for Terraform operations\n */\nexport class TerraformRunner extends RunnerBase {\n  readonly name = 'terraform';\n\n  protected readonly steps = new Map<string, (agent: IAgent) => Promise<IRunnerResult>>([\n    ['execute', this.runExecute.bind(this)],\n  ]);\n\n  /**\n   * Execute step: Build and run the Terraform command.\n   * All command execution goes through IAgent (not child_process).\n   */\n  private async runExecute(agent: IAgent): Promise<IRunnerResult> {\n    try {\n      const settings = getSettings(agent);\n\n      agent.info(`Starting Terraform ${settings.command} action...`);\n\n      // Resolve and install Terraform version\n      await setupToolVersion(\n        agent,\n        'Terraform',\n        settings.terraformVersion,\n        settings.terraformVersionFile,\n        settings.workingDirectory,\n        resolver,\n        installer,\n      );\n\n      // Build the service\n      const builder = TerraformBuilder.create(settings.command).withWorkingDirectory(\n        settings.workingDirectory,\n      );\n      configureSharedIacBuilder(builder, settings);\n      const service = builder.build();\n\n      // Run command through IAgent interface\n      return await executeIacCommand(\n        agent,\n        `Terraform ${settings.command}`,\n        service,\n        settings,\n        this.success.bind(this),\n        this.failure.bind(this),\n      );\n    } catch (error) {\n      return this.failure(error instanceof Error ? error : new Error(String(error)));\n    }\n  }\n}\n\n/**\n * Factory function to create a Terraform runner\n */\nexport function createTerraformRunner(): TerraformRunner {\n  return new TerraformRunner();\n}\n"],"names":["VERSION_REGEX"],"mappings":";;;;;;;;AAQO,MAAe,cAAA,CAGa;AAAA;AAAA,EAEvB,QAAA;AAAA,EACA,iBAAA,GAA4B,GAAA;AAAA;AAAA,EAGnB,YAAA,uBAAwC,GAAA,EAAI;AAAA,EAC5C,UAAA,uBAAsC,GAAA,EAAI;AAAA,EAC1C,YAAsB,EAAC;AAAA,EACvB,cAAA,uBAA0C,GAAA,EAAI;AAAA,EAC9C,WAAqB,EAAC;AAAA;AAAA,EAG/B,YAAA,GAAwB,KAAA;AAAA,EACxB,OAAA,GAAmB,KAAA;AAAA,EACnB,QAAA,GAAoB,KAAA;AAAA,EACpB,gBAAA,GAA4B,KAAA;AAAA,EAC5B,QAAA,GAAoB,IAAA;AAAA,EACpB,YAAA,GAAwB,KAAA;AAAA,EACxB,aAAA,GAAyB,KAAA;AAAA;AAAA,EAGzB,SAAA;AAAA,EACA,QAAA;AAAA,EACA,YAAA;AAAA,EACA,YAAA;AAAA;AAAA,EASV,YAAY,OAAA,EAAyB;AACnC,IAAA,IAAA,CAAK,gBAAgB,OAAO,CAAA;AAC5B,IAAA,IAAA,CAAK,QAAA,GAAW,OAAA;AAChB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,qBAAqB,SAAA,EAAyB;AAC5C,IAAA,eAAA,CAAgB,mBAAA,CAAoB,WAAW,kBAAkB,CAAA;AACjE,IAAA,IAAA,CAAK,iBAAA,GAAoB,SAAA;AACzB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,uBAAA,CAAwB,KAAa,KAAA,EAAqB;AACxD,IAAA,eAAA,CAAgB,mBAAA,CAAoB,KAAK,0BAA0B,CAAA;AACnE,IAAA,IAAA,CAAK,YAAA,CAAa,GAAA,CAAI,GAAA,EAAK,KAAK,CAAA;AAChC,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,yBAAyB,SAAA,EAAyC;AAChE,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,MAAA,CAAO,OAAA,CAAQ,SAAS,CAAA,EAAG;AACpD,MAAA,IAAA,CAAK,uBAAA,CAAwB,KAAK,KAAK,CAAA;AAAA,IACzC;AACA,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,YAAA,CAAa,KAAa,KAAA,EAAqB;AAC7C,IAAA,eAAA,CAAgB,mBAAA,CAAoB,KAAK,cAAc,CAAA;AACvD,IAAA,IAAA,CAAK,UAAA,CAAW,GAAA,CAAI,GAAA,EAAK,KAAK,CAAA;AAC9B,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,cAAc,SAAA,EAAyC;AACrD,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,MAAA,CAAO,OAAA,CAAQ,SAAS,CAAA,EAAG;AACpD,MAAA,IAAA,CAAK,YAAA,CAAa,KAAK,KAAK,CAAA;AAAA,IAC9B;AACA,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,YAAY,QAAA,EAAwB;AAClC,IAAA,eAAA,CAAgB,mBAAA,CAAoB,UAAU,eAAe,CAAA;AAC7D,IAAA,SAAA,CAAU,IAAA,CAAK,WAAW,QAAQ,CAAA;AAClC,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,aAAa,SAAA,EAA2B;AACtC,IAAA,KAAA,MAAW,YAAY,SAAA,EAAW;AAChC,MAAA,IAAA,CAAK,YAAY,QAAQ,CAAA;AAAA,IAC3B;AACA,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,iBAAA,CAAkB,KAAa,KAAA,EAAqB;AAClD,IAAA,eAAA,CAAgB,mBAAA,CAAoB,KAAK,oBAAoB,CAAA;AAC7D,IAAA,IAAA,CAAK,cAAA,CAAe,GAAA,CAAI,GAAA,EAAK,KAAK,CAAA;AAClC,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,mBAAmB,MAAA,EAAsC;AACvD,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,MAAA,CAAO,OAAA,CAAQ,MAAM,CAAA,EAAG;AACjD,MAAA,IAAA,CAAK,iBAAA,CAAkB,KAAK,KAAK,CAAA;AAAA,IACnC;AACA,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,WAAW,MAAA,EAAsB;AAC/B,IAAA,eAAA,CAAgB,mBAAA,CAAoB,QAAQ,QAAQ,CAAA;AACpD,IAAA,SAAA,CAAU,IAAA,CAAK,UAAU,MAAM,CAAA;AAC/B,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,YAAY,OAAA,EAAyB;AACnC,IAAA,KAAA,MAAW,UAAU,OAAA,EAAS;AAC5B,MAAA,IAAA,CAAK,WAAW,MAAM,CAAA;AAAA,IACxB;AACA,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,eAAA,GAAwB;AACtB,IAAA,IAAA,CAAK,YAAA,GAAe,IAAA;AACpB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,UAAA,GAAmB;AACjB,IAAA,IAAA,CAAK,OAAA,GAAU,IAAA;AACf,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,aAAa,QAAA,EAAwB;AACnC,IAAA,eAAA,CAAgB,mBAAA,CAAoB,UAAU,gBAAgB,CAAA;AAC9D,IAAA,IAAA,CAAK,SAAA,GAAY,QAAA;AACjB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,YAAY,QAAA,EAAwB;AAClC,IAAA,eAAA,CAAgB,mBAAA,CAAoB,UAAU,kBAAkB,CAAA;AAChE,IAAA,IAAA,CAAK,QAAA,GAAW,QAAA;AAChB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,WAAA,GAAoB;AAClB,IAAA,IAAA,CAAK,QAAA,GAAW,IAAA;AAChB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,mBAAA,GAA4B;AAC1B,IAAA,IAAA,CAAK,gBAAA,GAAmB,IAAA;AACxB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,gBAAgB,KAAA,EAAqB;AACnC,IAAA,IAAI,QAAQ,CAAA,EAAG;AACb,MAAA,MAAM,IAAI,MAAM,sCAAsC,CAAA;AAAA,IACxD;AACA,IAAA,IAAA,CAAK,YAAA,GAAe,KAAA;AACpB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,gBAAgB,OAAA,EAAuB;AACrC,IAAA,eAAA,CAAgB,mBAAA,CAAoB,SAAS,cAAc,CAAA;AAC3D,IAAA,IAAA,CAAK,YAAA,GAAe,OAAA;AACpB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,WAAA,GAAoB;AAClB,IAAA,IAAA,CAAK,QAAA,GAAW,IAAA;AAChB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,cAAA,GAAuB;AACrB,IAAA,IAAA,CAAK,QAAA,GAAW,KAAA;AAChB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,eAAA,GAAwB;AACtB,IAAA,IAAA,CAAK,YAAA,GAAe,IAAA;AACpB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,gBAAA,GAAyB;AACvB,IAAA,IAAA,CAAK,aAAA,GAAgB,IAAA;AACrB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,KAAA,GAAc;AACZ,IAAA,IAAA,CAAK,QAAA,GAAW,MAAA;AAChB,IAAA,IAAA,CAAK,iBAAA,GAAoB,GAAA;AACzB,IAAA,IAAA,CAAK,aAAa,KAAA,EAAM;AACxB,IAAA,IAAA,CAAK,WAAW,KAAA,EAAM;AACtB,IAAA,IAAA,CAAK,UAAU,MAAA,GAAS,CAAA;AACxB,IAAA,IAAA,CAAK,eAAe,KAAA,EAAM;AAC1B,IAAA,IAAA,CAAK,SAAS,MAAA,GAAS,CAAA;AACvB,IAAA,IAAA,CAAK,YAAA,GAAe,KAAA;AACpB,IAAA,IAAA,CAAK,OAAA,GAAU,KAAA;AACf,IAAA,IAAA,CAAK,QAAA,GAAW,KAAA;AAChB,IAAA,IAAA,CAAK,gBAAA,GAAmB,KAAA;AACxB,IAAA,IAAA,CAAK,QAAA,GAAW,IAAA;AAChB,IAAA,IAAA,CAAK,YAAA,GAAe,KAAA;AACpB,IAAA,IAAA,CAAK,aAAA,GAAgB,KAAA;AACrB,IAAA,IAAA,CAAK,SAAA,GAAY,MAAA;AACjB,IAAA,IAAA,CAAK,QAAA,GAAW,MAAA;AAChB,IAAA,IAAA,CAAK,YAAA,GAAe,MAAA;AACpB,IAAA,IAAA,CAAK,YAAA,GAAe,MAAA;AACpB,IAAA,IAAA,CAAK,aAAA,EAAc;AACnB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAOU,oBAAoB,OAAA,EAA4B;AAExD,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,IAAA,CAAK,YAAA,CAAa,SAAQ,EAAG;AACtD,MAAA,OAAA,CAAQ,sBAAA,CAAuB,KAAK,KAAK,CAAA;AAAA,IAC3C;AAGA,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,IAAA,CAAK,UAAA,CAAW,SAAQ,EAAG;AACpD,MAAA,OAAA,CAAQ,WAAA,CAAY,KAAK,KAAK,CAAA;AAAA,IAChC;AAGA,IAAA,KAAA,MAAW,OAAA,IAAW,KAAK,SAAA,EAAW;AACpC,MAAA,OAAA,CAAQ,WAAW,OAAO,CAAA;AAAA,IAC5B;AAGA,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,IAAA,CAAK,cAAA,CAAe,SAAQ,EAAG;AACxD,MAAA,OAAA,CAAQ,gBAAA,CAAiB,KAAK,KAAK,CAAA;AAAA,IACrC;AAGA,IAAA,KAAA,MAAW,MAAA,IAAU,KAAK,QAAA,EAAU;AAClC,MAAA,OAAA,CAAQ,UAAU,MAAM,CAAA;AAAA,IAC1B;AAGA,IAAA,OAAA,CAAQ,cAAA,CAAe,KAAK,YAAY,CAAA;AACxC,IAAA,OAAA,CAAQ,SAAA,CAAU,KAAK,OAAO,CAAA;AAC9B,IAAA,OAAA,CAAQ,UAAA,CAAW,KAAK,QAAQ,CAAA;AAChC,IAAA,OAAA,CAAQ,kBAAA,CAAmB,KAAK,gBAAgB,CAAA;AAChD,IAAA,OAAA,CAAQ,UAAA,CAAW,KAAK,QAAQ,CAAA;AAChC,IAAA,OAAA,CAAQ,cAAA,CAAe,KAAK,YAAY,CAAA;AACxC,IAAA,OAAA,CAAQ,eAAA,CAAgB,KAAK,aAAa,CAAA;AAG1C,IAAA,OAAA,CAAQ,WAAA,CAAY,KAAK,SAAS,CAAA;AAClC,IAAA,OAAA,CAAQ,UAAA,CAAW,KAAK,QAAQ,CAAA;AAChC,IAAA,OAAA,CAAQ,cAAA,CAAe,KAAK,YAAY,CAAA;AACxC,IAAA,OAAA,CAAQ,cAAA,CAAe,KAAK,YAAY,CAAA;AAAA,EAC1C;AAOF;;ACtOO,MAAM,kBAAA,GAAkD;AAAA,EAC7D,MAAA;AAAA,EACA,UAAA;AAAA,EACA,KAAA;AAAA,EACA,MAAA;AAAA,EACA,OAAA;AAAA,EACA,SAAA;AAAA,EACA,QAAA;AAAA,EACA,MAAA;AAAA,EACA,OAAA;AAAA,EACA,QAAA;AAAA,EACA,SAAA;AAAA,EACA,OAAA;AAAA,EACA,SAAA;AAAA,EACA;AACF;;ACoBO,MAAM,qBAAA,GAAqD,CAAC,OAAA,EAAS,SAAS,CAAA;AAK9E,MAAM,eAAA,GAA+C;AAAA,EAC1D,MAAA;AAAA,EACA,OAAA;AAAA,EACA,SAAA;AAAA,EACA,SAAA;AAAA,EACA,OAAA;AAAA,EACA;AACF,CAAA;AAKO,MAAM,iBAAA,GAAiD;AAAA,EAC5D,MAAA;AAAA,EACA,OAAA;AAAA,EACA,SAAA;AAAA,EACA,SAAA;AAAA,EACA;AACF,CAAA;;AC/EO,MAAe,sBAAA,CAAuB;AAAA,EAC3C,YAA+B,QAAA,EAAwB;AAAxB,IAAA,IAAA,CAAA,QAAA,GAAA,QAAA;AAAA,EAAyB;AAAA;AAAA;AAAA;AAAA;AAAA,EAkB9C,qBAAA,CAAsB,MAAgB,OAAA,EAAiC;AAC/E,IAAA,IAAA,CAAK,gBAAA,CAAiB,MAAM,OAAO,CAAA;AACnC,IAAA,IAAA,CAAK,oBAAA,CAAqB,MAAM,OAAO,CAAA;AACvC,IAAA,IAAA,CAAK,kBAAA,CAAmB,MAAM,OAAO,CAAA;AACrC,IAAA,IAAA,CAAK,gBAAA,CAAiB,MAAM,OAAO,CAAA;AACnC,IAAA,IAAA,CAAK,iBAAA,CAAkB,MAAM,OAAO,CAAA;AACpC,IAAA,IAAA,CAAK,mBAAmB,IAAI,CAAA;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA,EAKU,gBAAA,CAAiB,MAAgB,OAAA,EAAiC;AAC1E,IAAA,IAAI,YAAY,MAAA,EAAQ;AAGxB,IAAA,KAAA,MAAW,CAAC,KAAK,KAAK,CAAA,IAAK,KAAK,QAAA,CAAS,aAAA,CAAc,SAAQ,EAAG;AAChE,MAAA,IAAA,CAAK,KAAK,iBAAA,EAAmB,CAAA,EAAG,GAAG,CAAA,CAAA,EAAI,KAAK,CAAA,CAAE,CAAA;AAAA,IAChD;AAGA,IAAA,IAAI,IAAA,CAAK,SAAS,WAAA,EAAa;AAC7B,MAAA,IAAA,CAAK,KAAK,cAAc,CAAA;AAAA,IAC1B;AAGA,IAAA,IAAI,IAAA,CAAK,SAAS,YAAA,EAAc;AAC9B,MAAA,IAAA,CAAK,KAAK,gBAAgB,CAAA;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKU,oBAAA,CAAqB,MAAgB,OAAA,EAAiC;AAC9E,IAAA,IAAI,CAAC,IAAA,CAAK,iBAAA,CAAkB,OAAO,CAAA,EAAG;AAGtC,IAAA,KAAA,MAAW,OAAA,IAAW,IAAA,CAAK,QAAA,CAAS,QAAA,EAAU;AAC5C,MAAA,IAAA,CAAK,IAAA,CAAK,aAAa,OAAO,CAAA;AAAA,IAChC;AAGA,IAAA,KAAA,MAAW,CAAC,KAAK,KAAK,CAAA,IAAK,KAAK,QAAA,CAAS,SAAA,CAAU,SAAQ,EAAG;AAC5D,MAAA,IAAA,CAAK,KAAK,MAAA,EAAQ,CAAA,EAAG,GAAG,CAAA,CAAA,EAAI,KAAK,CAAA,CAAE,CAAA;AAAA,IACrC;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKU,kBAAA,CAAmB,MAAgB,OAAA,EAAiC;AAC5E,IAAA,IAAI,CAAC,IAAA,CAAK,eAAA,CAAgB,OAAO,CAAA,EAAG;AAEpC,IAAA,KAAA,MAAW,MAAA,IAAU,IAAA,CAAK,QAAA,CAAS,OAAA,EAAS;AAC1C,MAAA,IAAA,CAAK,IAAA,CAAK,WAAW,MAAM,CAAA;AAAA,IAC7B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKU,gBAAA,CAAiB,MAAgB,OAAA,EAAiC;AAC1E,IAAA,IAAI,YAAY,MAAA,EAAQ;AAGxB,IAAA,IAAI,IAAA,CAAK,SAAS,OAAA,EAAS;AACzB,MAAA,IAAA,CAAK,IAAA,CAAK,MAAA,EAAQ,IAAA,CAAK,QAAA,CAAS,OAAO,CAAA;AAAA,IACzC;AAGA,IAAA,IAAI,CAAC,IAAA,CAAK,QAAA,CAAS,OAAA,EAAS;AAC1B,MAAA,IAAA,CAAK,KAAK,gBAAgB,CAAA;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKU,iBAAA,CAAkB,MAAgB,OAAA,EAAiC;AAC3E,IAAA,IAAI,CAAC,IAAA,CAAK,mBAAA,CAAoB,OAAO,CAAA,EAAG;AAGxC,IAAA,IAAI,IAAA,CAAK,SAAS,WAAA,EAAa;AAC7B,MAAA,IAAA,CAAK,KAAK,eAAe,CAAA;AAAA,IAC3B;AAGA,IAAA,IAAI,OAAA,KAAY,OAAA,IAAW,OAAA,KAAY,SAAA,EAAW;AAChD,MAAA,IAAI,CAAC,IAAA,CAAK,QAAA,CAAS,OAAA,EAAS;AAC1B,QAAA,IAAA,CAAK,KAAK,gBAAgB,CAAA;AAAA,MAC5B;AAAA,IACF;AAGA,IAAA,IAAI,OAAA,KAAY,OAAA,IAAW,IAAA,CAAK,QAAA,CAAS,QAAA,EAAU;AAEnD,EACF;AAAA;AAAA;AAAA;AAAA,EAKU,mBAAmB,IAAA,EAAsB;AAEjD,IAAA,IAAI,IAAA,CAAK,QAAA,CAAS,WAAA,KAAgB,MAAA,EAAW;AAC3C,MAAA,IAAA,CAAK,KAAK,cAAA,EAAgB,MAAA,CAAO,IAAA,CAAK,QAAA,CAAS,WAAW,CAAC,CAAA;AAAA,IAC7D;AAGA,IAAA,IAAI,IAAA,CAAK,SAAS,WAAA,EAAa;AAC7B,MAAA,IAAA,CAAK,IAAA,CAAK,eAAA,EAAiB,IAAA,CAAK,QAAA,CAAS,WAAW,CAAA;AAAA,IACtD;AAGA,IAAA,IAAI,IAAA,CAAK,SAAS,OAAA,EAAS;AACzB,MAAA,IAAA,CAAK,KAAK,WAAW,CAAA;AAAA,IACvB;AAGA,IAAA,IAAI,IAAA,CAAK,SAAS,eAAA,EAAiB;AACjC,MAAA,IAAA,CAAK,KAAK,mBAAmB,CAAA;AAAA,IAC/B;AAGA,IAAA,IAAI,KAAK,QAAA,CAAS,OAAA,KAAY,OAAA,IAAW,IAAA,CAAK,SAAS,QAAA,EAAU;AAC/D,MAAA,IAAA,CAAK,IAAA,CAAK,IAAA,CAAK,QAAA,CAAS,QAAQ,CAAA;AAAA,IAClC;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAKU,kBAAkB,OAAA,EAAoC;AAC9D,IAAA,OAAO,iBAAA,CAAkB,SAAS,OAAO,CAAA;AAAA,EAC3C;AAAA;AAAA;AAAA;AAAA,EAKU,gBAAgB,OAAA,EAAoC;AAC5D,IAAA,OAAO,eAAA,CAAgB,SAAS,OAAO,CAAA;AAAA,EACzC;AAAA;AAAA;AAAA;AAAA,EAKU,oBAAoB,OAAA,EAAoC;AAChE,IAAA,OAAO,qBAAA,CAAsB,SAAS,OAAO,CAAA;AAAA,EAC/C;AACF;;AC9KO,MAAM,iCAAiC,sBAAA,CAAuB;AAAA,EACvC,QAAA;AAAA,EAE5B,YAAY,QAAA,EAA8B;AACxC,IAAA,KAAA,CAAM,QAAQ,CAAA;AACd,IAAA,IAAA,CAAK,QAAA,GAAW,QAAA;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,aAAA,GAA0B;AACxB,IAAA,MAAM,OAAiB,EAAC;AACxB,IAAA,IAAA,CAAK,qBAAA,CAAsB,IAAA,EAAM,IAAA,CAAK,QAAA,CAAS,OAAO,CAAA;AACtD,IAAA,OAAO,IAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,YAAA,GAAyB;AACvB,IAAA,OAAO,CAAC,IAAA,CAAK,QAAA,CAAS,QAAA,EAAU,IAAA,CAAK,SAAS,OAAA,EAAS,GAAG,IAAA,CAAK,aAAA,EAAe,CAAA;AAAA,EAChF;AACF;;ACtBO,MAAe,cAAA,CAAsC;AAAA;AAAA,EAElD,QAAA;AAAA,EACA,iBAAA;AAAA,EACS,SAAA;AAAA;AAAA,EAGA,YAAA,uBAAwC,GAAA,EAAI;AAAA,EAC5C,UAAA,uBAAsC,GAAA,EAAI;AAAA,EAC1C,YAAsB,EAAC;AAAA,EACvB,cAAA,uBAA0C,GAAA,EAAI;AAAA,EAC9C,WAAqB,EAAC;AAAA;AAAA,EAG/B,YAAA,GAAwB,KAAA;AAAA,EACxB,OAAA,GAAmB,KAAA;AAAA,EACnB,QAAA,GAAoB,KAAA;AAAA,EACpB,gBAAA,GAA4B,KAAA;AAAA,EAC5B,QAAA,GAAoB,IAAA;AAAA,EACpB,YAAA,GAAwB,KAAA;AAAA,EACxB,aAAA,GAAyB,KAAA;AAAA;AAAA,EAGzB,SAAA;AAAA,EACA,QAAA;AAAA,EACA,YAAA;AAAA,EACA,YAAA;AAAA;AAAA,EAGA,gBAAA;AAAA,EACA,gBAAA;AAAA,EAEE,WAAA,CAAY,OAAA,EAAiB,QAAA,EAAkB,gBAAA,EAA0B;AACjF,IAAA,IAAA,CAAK,QAAA,GAAW,OAAA;AAChB,IAAA,IAAA,CAAK,SAAA,GAAY,QAAA;AACjB,IAAA,IAAA,CAAK,iBAAA,GAAoB,gBAAA;AAAA,EAC3B;AAAA;AAAA,EAYA,IAAY,eAAA,GAA0C;AACpD,IAAA,IAAI,CAAC,KAAK,gBAAA,EAAkB;AAC1B,MAAA,IAAA,CAAK,gBAAA,GAAmB,KAAK,qBAAA,EAAsB;AAAA,IACrD;AACA,IAAA,OAAO,IAAA,CAAK,gBAAA;AAAA,EACd;AAAA,EAEA,IAAY,eAAA,GAA0C;AACpD,IAAA,IAAI,CAAC,KAAK,gBAAA,EAAkB;AAC1B,MAAA,IAAA,CAAK,gBAAA,GAAmB,KAAK,qBAAA,EAAsB;AAAA,IACrD;AACA,IAAA,OAAO,IAAA,CAAK,gBAAA;AAAA,EACd;AAAA;AAAA,EAIA,IAAI,OAAA,GAAkB;AACpB,IAAA,OAAO,IAAA,CAAK,QAAA;AAAA,EACd;AAAA,EAEA,IAAI,QAAA,GAAmB;AACrB,IAAA,OAAO,IAAA,CAAK,SAAA;AAAA,EACd;AAAA,EAEA,IAAI,gBAAA,GAA2B;AAC7B,IAAA,OAAO,IAAA,CAAK,iBAAA;AAAA,EACd;AAAA,EAEA,IAAI,WAAA,GAA2C;AAC7C,IAAA,OAAO,IAAA,CAAK,YAAA;AAAA,EACd;AAAA,EAEA,IAAI,SAAA,GAAyC;AAC3C,IAAA,OAAO,IAAA,CAAK,UAAA;AAAA,EACd;AAAA,EAEA,IAAI,QAAA,GAA8B;AAChC,IAAA,OAAO,CAAC,GAAG,IAAA,CAAK,SAAS,CAAA;AAAA,EAC3B;AAAA,EAEA,IAAI,aAAA,GAA6C;AAC/C,IAAA,OAAO,IAAA,CAAK,cAAA;AAAA,EACd;AAAA,EAEA,IAAI,OAAA,GAA6B;AAC/B,IAAA,OAAO,CAAC,GAAG,IAAA,CAAK,QAAQ,CAAA;AAAA,EAC1B;AAAA,EAEA,IAAI,WAAA,GAAuB;AACzB,IAAA,OAAO,IAAA,CAAK,YAAA;AAAA,EACd;AAAA,EAEA,IAAI,MAAA,GAAkB;AACpB,IAAA,OAAO,IAAA,CAAK,OAAA;AAAA,EACd;AAAA,EAEA,IAAI,QAAA,GAA+B;AACjC,IAAA,OAAO,IAAA,CAAK,SAAA;AAAA,EACd;AAAA,EAEA,IAAI,OAAA,GAA8B;AAChC,IAAA,OAAO,IAAA,CAAK,QAAA;AAAA,EACd;AAAA,EAEA,IAAI,OAAA,GAAmB;AACrB,IAAA,OAAO,IAAA,CAAK,QAAA;AAAA,EACd;AAAA,EAEA,IAAI,eAAA,GAA2B;AAC7B,IAAA,OAAO,IAAA,CAAK,gBAAA;AAAA,EACd;AAAA,EAEA,IAAI,WAAA,GAAkC;AACpC,IAAA,OAAO,IAAA,CAAK,YAAA;AAAA,EACd;AAAA,EAEA,IAAI,WAAA,GAAkC;AACpC,IAAA,OAAO,IAAA,CAAK,YAAA;AAAA,EACd;AAAA,EAEA,IAAI,OAAA,GAAmB;AACrB,IAAA,OAAO,IAAA,CAAK,QAAA;AAAA,EACd;AAAA,EAEA,IAAI,WAAA,GAAuB;AACzB,IAAA,OAAO,IAAA,CAAK,YAAA;AAAA,EACd;AAAA,EAEA,IAAI,YAAA,GAAwB;AAC1B,IAAA,OAAO,IAAA,CAAK,aAAA;AAAA,EACd;AAAA;AAAA,EAIA,IAAI,aAAA,GAAyB;AAC3B,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,IAAI,UAAA,GAAuB;AACzB,IAAA,OAAO,IAAA,CAAK,gBAAgB,YAAA,EAAa;AAAA,EAC3C;AAAA;AAAA,EAIA,WAAW,OAAA,EAAuB;AAChC,IAAA,IAAA,CAAK,QAAA,GAAW,OAAA;AAChB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,oBAAoB,SAAA,EAAyB;AAC3C,IAAA,IAAA,CAAK,iBAAA,GAAoB,SAAA;AACzB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,sBAAA,CAAuB,KAAa,KAAA,EAAqB;AACvD,IAAA,IAAA,CAAK,YAAA,CAAa,GAAA,CAAI,GAAA,EAAK,KAAK,CAAA;AAChC,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,0BAA0B,GAAA,EAAmB;AAC3C,IAAA,IAAA,CAAK,YAAA,CAAa,OAAO,GAAG,CAAA;AAC5B,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,yBAAA,GAAkC;AAChC,IAAA,IAAA,CAAK,aAAa,KAAA,EAAM;AACxB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,WAAA,CAAY,KAAa,KAAA,EAAqB;AAC5C,IAAA,IAAA,CAAK,UAAA,CAAW,GAAA,CAAI,GAAA,EAAK,KAAK,CAAA;AAC9B,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,eAAe,GAAA,EAAmB;AAChC,IAAA,IAAA,CAAK,UAAA,CAAW,OAAO,GAAG,CAAA;AAC1B,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,cAAA,GAAuB;AACrB,IAAA,IAAA,CAAK,WAAW,KAAA,EAAM;AACtB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,WAAW,QAAA,EAAwB;AACjC,IAAA,SAAA,CAAU,IAAA,CAAK,WAAW,QAAQ,CAAA;AAClC,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,cAAc,QAAA,EAAwB;AACpC,IAAA,UAAA,CAAW,IAAA,CAAK,WAAW,QAAQ,CAAA;AACnC,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,aAAA,GAAsB;AACpB,IAAA,IAAA,CAAK,UAAU,MAAA,GAAS,CAAA;AACxB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,gBAAA,CAAiB,KAAa,KAAA,EAAqB;AACjD,IAAA,IAAA,CAAK,cAAA,CAAe,GAAA,CAAI,GAAA,EAAK,KAAK,CAAA;AAClC,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,oBAAoB,GAAA,EAAmB;AACrC,IAAA,IAAA,CAAK,cAAA,CAAe,OAAO,GAAG,CAAA;AAC9B,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,kBAAA,GAA2B;AACzB,IAAA,IAAA,CAAK,eAAe,KAAA,EAAM;AAC1B,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,UAAU,MAAA,EAAsB;AAC9B,IAAA,SAAA,CAAU,IAAA,CAAK,UAAU,MAAM,CAAA;AAC/B,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,aAAa,MAAA,EAAsB;AACjC,IAAA,UAAA,CAAW,IAAA,CAAK,UAAU,MAAM,CAAA;AAChC,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,YAAA,GAAqB;AACnB,IAAA,IAAA,CAAK,SAAS,MAAA,GAAS,CAAA;AACvB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,eAAe,OAAA,EAAwB;AACrC,IAAA,IAAA,CAAK,YAAA,GAAe,OAAA;AACpB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,UAAU,OAAA,EAAwB;AAChC,IAAA,IAAA,CAAK,OAAA,GAAU,OAAA;AACf,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,YAAY,QAAA,EAAoC;AAC9C,IAAA,IAAA,CAAK,SAAA,GAAY,QAAA;AACjB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,WAAW,QAAA,EAAoC;AAC7C,IAAA,IAAA,CAAK,QAAA,GAAW,QAAA;AAChB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,WAAW,OAAA,EAAwB;AACjC,IAAA,IAAA,CAAK,QAAA,GAAW,OAAA;AAChB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,mBAAmB,OAAA,EAAwB;AACzC,IAAA,IAAA,CAAK,gBAAA,GAAmB,OAAA;AACxB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,eAAe,KAAA,EAAiC;AAC9C,IAAA,IAAA,CAAK,YAAA,GAAe,KAAA;AACpB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,eAAe,OAAA,EAAmC;AAChD,IAAA,IAAA,CAAK,YAAA,GAAe,OAAA;AACpB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,WAAW,OAAA,EAAwB;AACjC,IAAA,IAAA,CAAK,QAAA,GAAW,OAAA;AAChB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,eAAe,OAAA,EAAwB;AACrC,IAAA,IAAA,CAAK,YAAA,GAAe,OAAA;AACpB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,gBAAgB,OAAA,EAAwB;AACtC,IAAA,IAAA,CAAK,aAAA,GAAgB,OAAA;AACrB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA;AAAA,EAIA,aAAA,GAA0B;AACxB,IAAA,OAAO,IAAA,CAAK,gBAAgB,aAAA,EAAc;AAAA,EAC5C;AAAA,EAEA,YAAA,GAAyB;AACvB,IAAA,OAAO,IAAA,CAAK,gBAAgB,YAAA,EAAa;AAAA,EAC3C;AAAA,EAEA,QAAA,GAAmB;AACjB,IAAA,OAAO,IAAA,CAAK,gBAAgB,QAAA,EAAS;AAAA,EACvC;AAAA,EAEA,wBAAA,GAAmC;AACjC,IAAA,OAAO,IAAA,CAAK,gBAAgB,wBAAA,EAAyB;AAAA,EACvD;AAAA;AAAA,EAIA,KAAA,GAAc;AACZ,IAAA,IAAA,CAAK,aAAa,KAAA,EAAM;AACxB,IAAA,IAAA,CAAK,WAAW,KAAA,EAAM;AACtB,IAAA,IAAA,CAAK,UAAU,MAAA,GAAS,CAAA;AACxB,IAAA,IAAA,CAAK,eAAe,KAAA,EAAM;AAC1B,IAAA,IAAA,CAAK,SAAS,MAAA,GAAS,CAAA;AACvB,IAAA,IAAA,CAAK,YAAA,GAAe,KAAA;AACpB,IAAA,IAAA,CAAK,OAAA,GAAU,KAAA;AACf,IAAA,IAAA,CAAK,QAAA,GAAW,KAAA;AAChB,IAAA,IAAA,CAAK,gBAAA,GAAmB,KAAA;AACxB,IAAA,IAAA,CAAK,QAAA,GAAW,IAAA;AAChB,IAAA,IAAA,CAAK,YAAA,GAAe,KAAA;AACpB,IAAA,IAAA,CAAK,aAAA,GAAgB,KAAA;AACrB,IAAA,IAAA,CAAK,SAAA,GAAY,MAAA;AACjB,IAAA,IAAA,CAAK,QAAA,GAAW,MAAA;AAChB,IAAA,IAAA,CAAK,YAAA,GAAe,MAAA;AACpB,IAAA,IAAA,CAAK,YAAA,GAAe,MAAA;AACpB,IAAA,IAAA,CAAK,aAAA,EAAc;AACnB,IAAA,OAAO,IAAA;AAAA,EACT;AAAA,EAEA,KAAA,GAAqB;AACnB,IAAA,MAAM,MAAA,GAAS,KAAK,gBAAA,EAAiB;AAGrC,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,IAAA,CAAK,YAAA,CAAa,SAAQ,EAAG;AACtD,MAAA,MAAA,CAAO,sBAAA,CAAuB,KAAK,KAAK,CAAA;AAAA,IAC1C;AAGA,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,IAAA,CAAK,UAAA,CAAW,SAAQ,EAAG;AACpD,MAAA,MAAA,CAAO,WAAA,CAAY,KAAK,KAAK,CAAA;AAAA,IAC/B;AAGA,IAAA,KAAA,MAAW,OAAA,IAAW,KAAK,SAAA,EAAW;AACpC,MAAA,MAAA,CAAO,WAAW,OAAO,CAAA;AAAA,IAC3B;AAGA,IAAA,KAAA,MAAW,CAAC,GAAA,EAAK,KAAK,KAAK,IAAA,CAAK,cAAA,CAAe,SAAQ,EAAG;AACxD,MAAA,MAAA,CAAO,gBAAA,CAAiB,KAAK,KAAK,CAAA;AAAA,IACpC;AAGA,IAAA,KAAA,MAAW,MAAA,IAAU,KAAK,QAAA,EAAU;AAClC,MAAA,MAAA,CAAO,UAAU,MAAM,CAAA;AAAA,IACzB;AAGA,IAAA,MAAA,CAAO,cAAA,CAAe,KAAK,YAAY,CAAA;AACvC,IAAA,MAAA,CAAO,SAAA,CAAU,KAAK,OAAO,CAAA;AAC7B,IAAA,MAAA,CAAO,UAAA,CAAW,KAAK,QAAQ,CAAA;AAC/B,IAAA,MAAA,CAAO,kBAAA,CAAmB,KAAK,gBAAgB,CAAA;AAC/C,IAAA,MAAA,CAAO,UAAA,CAAW,KAAK,QAAQ,CAAA;AAC/B,IAAA,MAAA,CAAO,cAAA,CAAe,KAAK,YAAY,CAAA;AACvC,IAAA,MAAA,CAAO,eAAA,CAAgB,KAAK,aAAa,CAAA;AAGzC,IAAA,MAAA,CAAO,WAAA,CAAY,KAAK,SAAS,CAAA;AACjC,IAAA,MAAA,CAAO,UAAA,CAAW,KAAK,QAAQ,CAAA;AAC/B,IAAA,MAAA,CAAO,cAAA,CAAe,KAAK,YAAY,CAAA;AACvC,IAAA,MAAA,CAAO,cAAA,CAAe,KAAK,YAAY,CAAA;AAGvC,IAAA,IAAA,CAAK,cAAc,MAAM,CAAA;AAEzB,IAAA,OAAO,MAAA;AAAA,EACT;AACF;;AC5XO,MAAM,sBAAA,CAAuB;AAAA,EAClC,YAA6B,cAAA,EAAiC;AAAjC,IAAA,IAAA,CAAA,cAAA,GAAA,cAAA;AAAA,EAAkC;AAAA;AAAA;AAAA;AAAA;AAAA,EAM/D,QAAA,GAAmB;AACjB,IAAA,MAAM,OAAA,GAAU,IAAA,CAAK,cAAA,CAAe,YAAA,EAAa;AACjD,IAAA,OAAO,OAAA,CAAQ,IAAI,CAAA,GAAA,KAAO,IAAA,CAAK,UAAU,GAAG,CAAC,CAAA,CAAE,IAAA,CAAK,GAAG,CAAA;AAAA,EACzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,wBAAA,GAAmC;AACjC,IAAA,MAAM,OAAA,GAAU,IAAA,CAAK,cAAA,CAAe,YAAA,EAAa;AACjD,IAAA,IAAI,OAAA,CAAQ,MAAA,KAAW,CAAA,EAAG,OAAO,EAAA;AAEjC,IAAA,MAAM,QAAkB,EAAC;AAEzB,IAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,OAAA,CAAQ,QAAQ,CAAA,EAAA,EAAK;AACvC,MAAA,MAAM,UAAA,GAAa,QAAQ,CAAC,CAAA;AAC5B,MAAA,MAAM,GAAA,GAAM,IAAA,CAAK,SAAA,CAAU,UAAU,CAAA;AACrC,MAAA,MAAM,MAAA,GAAS,CAAA,KAAM,OAAA,CAAQ,MAAA,GAAS,CAAA;AAGtC,MAAA,MAAM,OAAA,GAAU,OAAA,CAAQ,CAAA,GAAI,CAAC,CAAA;AAC7B,MAAA,IAAI,GAAA,CAAI,UAAA,CAAW,GAAG,CAAA,IAAK,CAAC,MAAA,IAAU,OAAA,IAAW,CAAC,OAAA,CAAQ,UAAA,CAAW,GAAG,CAAA,EAAG;AAEzE,QAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,SAAA,CAAU,OAAO,CAAA;AACpC,QAAA,KAAA,CAAM,IAAA,CAAK,CAAA,EAAA,EAAK,GAAG,CAAA,CAAA,EAAI,KAAK,CAAA,CAAA,IAAM,CAAA,GAAI,CAAA,KAAM,OAAA,CAAQ,MAAA,GAAS,CAAA,GAAI,EAAA,GAAK,KAAA,CAAM,CAAA;AAC5E,QAAA,CAAA,EAAA;AAAA,MACF,CAAA,MAAA,IAAW,MAAM,CAAA,EAAG;AAElB,QAAA,KAAA,CAAM,IAAA,CAAK,MAAM,KAAK,CAAA;AAAA,MACxB,CAAA,MAAA,IAAW,MAAM,CAAA,EAAG;AAElB,QAAA,KAAA,CAAM,KAAK,CAAA,EAAA,EAAK,GAAG,CAAA,CAAA,IAAM,MAAA,GAAS,KAAK,KAAA,CAAM,CAAA;AAAA,MAC/C,CAAA,MAAO;AAEL,QAAA,KAAA,CAAM,KAAK,CAAA,EAAA,EAAK,GAAG,CAAA,CAAA,IAAM,MAAA,GAAS,KAAK,KAAA,CAAM,CAAA;AAAA,MAC/C;AAAA,IACF;AAEA,IAAA,OAAO,KAAA,CAAM,KAAK,IAAI,CAAA;AAAA,EACxB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,YAAA,GAAyB;AACvB,IAAA,OAAO,IAAA,CAAK,eAAe,YAAA,EAAa;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOQ,UAAU,GAAA,EAAqB;AACrC,IAAA,IAAI,YAAA,CAAa,IAAA,CAAK,GAAG,CAAA,EAAG;AAC1B,MAAA,OAAO,CAAA,CAAA,EAAI,GAAA,CAAI,OAAA,CAAQ,IAAA,EAAM,KAAK,CAAC,CAAA,CAAA,CAAA;AAAA,IACrC;AACA,IAAA,OAAO,GAAA;AAAA,EACT;AACF;;ACxEO,MAAM,iCAAiC,sBAAA,CAAuB;AAAA,EACnE,YAAY,QAAA,EAA8B;AACxC,IAAA,KAAA,CAAM,IAAI,wBAAA,CAAyB,QAAQ,CAAC,CAAA;AAAA,EAC9C;AACF;;ACHO,MAAM,yBAAyB,cAAA,CAA4C;AAAA,EAChF,WAAA,CAAY,OAAA,EAA2B,gBAAA,GAA2B,GAAA,EAAK;AACrE,IAAA,KAAA,CAAM,OAAA,EAAS,aAAa,gBAAgB,CAAA;AAAA,EAC9C;AAAA;AAAA,EAIA,IAAa,OAAA,GAA4B;AACvC,IAAA,OAAO,KAAA,CAAM,OAAA;AAAA,EACf;AAAA,EAES,WAAW,OAAA,EAAiC;AACnD,IAAA,OAAO,KAAA,CAAM,WAAW,OAAO,CAAA;AAAA,EACjC;AAAA;AAAA,EAIU,qBAAA,GAAkD;AAC1D,IAAA,OAAO,IAAI,yBAAyB,IAAI,CAAA;AAAA,EAC1C;AAAA,EAEU,qBAAA,GAAkD;AAC1D,IAAA,OAAO,IAAI,yBAAyB,IAAI,CAAA;AAAA,EAC1C;AAAA,EAEU,aAAA,GAAsB;AAAA,EAEhC;AAAA,EAEU,cAAc,OAAA,EAAqB;AAAA,EAE7C;AAAA,EAEU,gBAAA,GAAyB;AACjC,IAAA,OAAO,IAAI,gBAAA,CAAiB,IAAA,CAAK,OAAA,EAAS,KAAK,gBAAgB,CAAA;AAAA,EACjE;AAAA;AAAA,EAIS,KAAA,GAA2B;AAClC,IAAA,OAAO,MAAM,KAAA,EAAM;AAAA,EACrB;AACF;;ACtCO,MAAM,yBACH,cAAA,CAEV;AAAA;AAAA;AAAA;AAAA,EAIU,WAAA,GAAc;AACpB,IAAA,KAAA,EAAM;AAAA,EACR;AAAA;AAAA,EAIA,OAAO,OAAO,OAAA,EAA8C;AAC1D,IAAA,MAAM,OAAA,GAAU,IAAI,gBAAA,EAAiB;AACrC,IAAA,IAAI,OAAA,EAAS;AACX,MAAA,OAAA,CAAQ,YAAY,OAAO,CAAA;AAAA,IAC7B;AACA,IAAA,OAAO,OAAA;AAAA,EACT;AAAA,EAEA,OAAO,OAAA,GAA4B;AACjC,IAAA,OAAO,gBAAA,CAAiB,OAAO,MAAM,CAAA;AAAA,EACvC;AAAA,EAEA,OAAO,WAAA,GAAgC;AACrC,IAAA,OAAO,gBAAA,CAAiB,OAAO,UAAU,CAAA;AAAA,EAC3C;AAAA,EAEA,OAAO,MAAA,GAA2B;AAChC,IAAA,OAAO,gBAAA,CAAiB,OAAO,KAAK,CAAA;AAAA,EACtC;AAAA,EAEA,OAAO,OAAA,GAA4B;AACjC,IAAA,OAAO,gBAAA,CAAiB,OAAO,MAAM,CAAA;AAAA,EACvC;AAAA,EAEA,OAAO,QAAA,GAA6B;AAClC,IAAA,OAAO,gBAAA,CAAiB,OAAO,OAAO,CAAA;AAAA,EACxC;AAAA,EAEA,OAAO,UAAA,GAA+B;AACpC,IAAA,OAAO,gBAAA,CAAiB,OAAO,SAAS,CAAA;AAAA,EAC1C;AAAA,EAEA,OAAO,SAAA,GAA8B;AACnC,IAAA,OAAO,gBAAA,CAAiB,OAAO,QAAQ,CAAA;AAAA,EACzC;AAAA,EAEA,OAAO,OAAA,GAA4B;AACjC,IAAA,OAAO,gBAAA,CAAiB,OAAO,MAAM,CAAA;AAAA,EACvC;AAAA;AAAA,EAIA,KAAA,GAA2B;AACzB,IAAA,IAAI,CAAC,KAAK,QAAA,EAAU;AAClB,MAAA,MAAM,IAAI,KAAA;AAAA,QACR;AAAA,OACF;AAAA,IACF;AAEA,IAAA,MAAM,UAAU,IAAI,gBAAA,CAAiB,IAAA,CAAK,QAAA,EAAU,KAAK,iBAAiB,CAAA;AAC1E,IAAA,IAAA,CAAK,oBAAoB,OAAO,CAAA;AAChC,IAAA,OAAO,OAAA;AAAA,EACT;AAAA;AAAA,EAIU,aAAA,GAAsB;AAAA,EAEhC;AAAA,EAEU,gBAAgB,OAAA,EAAuB;AAC/C,IAAA,IAAI,CAAC,kBAAA,CAAmB,QAAA,CAAS,OAA2B,CAAA,EAAG;AAC7D,MAAA,MAAM,IAAI,KAAA;AAAA,QACR,8BAA8B,OAAO,CAAA,sBAAA,EAAyB,kBAAA,CAAmB,IAAA,CAAK,IAAI,CAAC,CAAA;AAAA,OAC7F;AAAA,IACF;AAAA,EACF;AACF;;AC9DO,SAAS,YAAY,KAAA,EAAmC;AAC7D,EAAA,OAAO;AAAA,IACL,OAAA,EAAS,KAAA,CAAM,QAAA,CAAS,SAAA,EAAW,IAAI,CAAA;AAAA,IACvC,gBAAA,EAAkB,KAAA,CAAM,QAAA,CAAS,mBAAmB,CAAA,IAAK,GAAA;AAAA,IACzD,gBAAA,EAAkB,KAAA,CAAM,QAAA,CAAS,mBAAmB,CAAA;AAAA,IACpD,oBAAA,EAAsB,KAAA,CAAM,QAAA,CAAS,wBAAwB,CAAA,IAAK,oBAAA;AAAA,IAClE,SAAA,EAAW,eAAA,CAAgB,KAAA,CAAM,QAAA,CAAS,WAAW,CAAC,CAAA;AAAA,IACtD,QAAA,EAAU,mBAAA,CAAoB,KAAA,CAAM,QAAA,CAAS,WAAW,CAAC,CAAA;AAAA,IACzD,aAAA,EAAe,eAAA,CAAgB,KAAA,CAAM,QAAA,CAAS,gBAAgB,CAAC,CAAA;AAAA,IAC/D,OAAA,EAAS,mBAAA,CAAoB,KAAA,CAAM,QAAA,CAAS,SAAS,CAAC,CAAA;AAAA,IACtD,WAAA,EAAa,KAAA,CAAM,eAAA,CAAgB,cAAc,CAAA;AAAA,IACjD,QAAA,EAAU,KAAA,CAAM,QAAA,CAAS,WAAW,CAAA;AAAA,IACpC,OAAA,EAAS,KAAA,CAAM,eAAA,CAAgB,UAAU,CAAA;AAAA,IACzC,eAAA,EAAiB,KAAA,CAAM,eAAA,CAAgB,kBAAkB,CAAA;AAAA,IACzD,WAAA,EAAa,KAAA,CAAM,QAAA,CAAS,aAAa,CAAA;AAAA,IACzC,WAAA,EAAa,KAAA,CAAM,QAAA,CAAS,cAAc,CAAA;AAAA,IAC1C,OAAA,EAAS,KAAA,CAAM,QAAA,CAAS,SAAS,CAAA;AAAA,IACjC,WAAA,EAAa,KAAA,CAAM,eAAA,CAAgB,aAAa,CAAA;AAAA,IAChD,YAAA,EAAc,KAAA,CAAM,eAAA,CAAgB,eAAe,CAAA;AAAA,IACnD,MAAA,EAAQ,KAAA,CAAM,eAAA,CAAgB,SAAS;AAAA,GACzC;AACF;;ACzCA,MAAM,sCAA2C,IAAI,GAAA,CAAI,CAAC,OAAA,EAAS,QAAA,EAAU,OAAO,CAAC,CAAA;AAErF,MAAM,mCAAwC,IAAI,GAAA,CAAI,CAAC,KAAA,EAAO,OAAO,CAAC,CAAA;AAM/D,SAAS,WAAA,GAA4B;AAC1C,EAAA,IAAI,CAAC,mBAAA,CAAoB,GAAA,CAAI,OAAA,CAAQ,QAAQ,CAAA,EAAG;AAC9C,IAAA,MAAM,IAAI,KAAA;AAAA,MACR,CAAA,sBAAA,EAAyB,QAAQ,QAAQ,CAAA,oCAAA;AAAA,KAC3C;AAAA,EACF;AACA,EAAA,IAAI,CAAC,gBAAA,CAAiB,GAAA,CAAI,OAAA,CAAQ,IAAI,CAAA,EAAG;AACvC,IAAA,MAAM,IAAI,KAAA,CAAM,CAAA,0BAAA,EAA6B,OAAA,CAAQ,IAAI,CAAA,gCAAA,CAAkC,CAAA;AAAA,EAC7F;AAEA,EAAA,MAAM,EAAA,GAAK,OAAA,CAAQ,QAAA,KAAa,OAAA,GAAU,YAAa,OAAA,CAAQ,QAAA;AAC/D,EAAA,MAAM,IAAA,GAAO,OAAA,CAAQ,IAAA,KAAS,OAAA,GAAU,OAAA,GAAU,OAAA;AAElD,EAAA,OAAO,EAAE,IAAI,IAAA,EAAK;AACpB;AAMO,SAAS,WAAA,CAAY,UAAkB,OAAA,EAAyB;AACrE,EAAA,MAAM,IAAA,GACJ,OAAA,CAAQ,GAAA,CAAI,mBAAmB,CAAA,IAAK,GAAG,OAAA,CAAQ,GAAA,CAAI,MAAM,CAAA,IAAK,MAAM,CAAA,eAAA,CAAA;AACtE,EAAA,MAAM,EAAE,IAAA,EAAK,GAAI,WAAA,EAAY;AAC7B,EAAA,OAAO,GAAG,IAAI,CAAA,CAAA,EAAI,QAAQ,CAAA,CAAA,EAAI,OAAO,IAAI,IAAI,CAAA,CAAA;AAC/C;;ACtCA,MAAM,YAAA,uBAAmB,GAAA,EAAoB;AAM7C,MAAM,qBAAA,GAAwB,8CAAA;AAM9B,SAAS,YAAA,CAAa,MAAA,EAAgB,OAAA,EAAiB,QAAA,EAA0B;AAC/E,EAAA,MAAM,KAAA,GAAQ,OAAA,CAAQ,IAAA,CAAK,MAAM,CAAA;AACjC,EAAA,IAAI,CAAC,KAAA,GAAQ,CAAC,CAAA,IAAK,CAAC,KAAA,CAAM,CAAC,CAAA,IAAK,CAAC,KAAA,CAAM,CAAC,CAAA,EAAG;AACzC,IAAA,MAAM,IAAI,KAAA,CAAM,CAAA,gBAAA,EAAmB,QAAQ,CAAA,sBAAA,EAAyB,OAAO,KAAA,CAAM,CAAA,EAAG,GAAG,CAAC,CAAA,CAAE,CAAA;AAAA,EAC5F;AACA,EAAA,OAAO;AAAA,IACL,KAAA,EAAO,QAAA,CAAS,KAAA,CAAM,CAAC,GAAG,EAAE,CAAA;AAAA,IAC5B,KAAA,EAAO,QAAA,CAAS,KAAA,CAAM,CAAC,GAAG,EAAE,CAAA;AAAA,IAC5B,KAAA,EAAO,QAAA,CAAS,KAAA,CAAM,CAAC,GAAG,EAAE,CAAA;AAAA,IAC5B,GAAA,EAAK,CAAA,EAAG,KAAA,CAAM,CAAC,CAAC,CAAA,CAAA,EAAI,KAAA,CAAM,CAAC,CAAC,CAAA,CAAA,EAAI,KAAA,CAAM,CAAC,CAAC,CAAA;AAAA,GAC1C;AACF;AAoCA,eAAsB,wBAAwB,KAAA,EAAoC;AAChF,EAAA,MAAM,MAAA,GAAS,YAAA,CAAa,GAAA,CAAI,YAAY,CAAA;AAC5C,EAAA,IAAI,MAAA,EAAQ;AACV,IAAA,OAAO,MAAA;AAAA,EACT;AAEA,EAAA,MAAM,SAAS,MAAM,KAAA,CAAM,KAAK,YAAA,EAAc,CAAC,WAAW,CAAA,EAAG;AAAA,IAC3D,MAAA,EAAQ,IAAA;AAAA,IACR,gBAAA,EAAkB;AAAA,GACnB,CAAA;AAED,EAAA,IAAI,MAAA,CAAO,aAAa,CAAA,EAAG;AACzB,IAAA,MAAM,IAAI,MAAM,CAAA,kCAAA,EAAqC,MAAA,CAAO,QAAQ,CAAA,GAAA,EAAM,MAAA,CAAO,MAAM,CAAA,CAAE,CAAA;AAAA,EAC3F;AAEA,EAAA,MAAM,OAAA,GAAU,YAAA,CAAa,MAAA,CAAO,MAAA,EAAQ,uBAAuB,YAAY,CAAA;AAC/E,EAAA,YAAA,CAAa,GAAA,CAAI,cAAc,OAAO,CAAA;AACtC,EAAA,OAAO,OAAA;AACT;AAKO,SAAS,YAAY,OAAA,EAA0B;AACpD,EAAA,OAAO,QAAQ,KAAA,IAAS,CAAA;AAC1B;;AC9EO,MAAM,iBAAA,CAAgD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAS3D,MAAM,IAAA,CAAK,QAAA,EAAkB,QAAA,EAA+C;AAC1E,IAAA,MAAM,OAAO,OAAA,EAAQ;AACrB,IAAA,IAAI,UAAA,GAAa,QAAQ,QAAQ,CAAA;AAIjC,IAAA,OAAO,IAAA,EAAM;AACX,MAAA,MAAM,QAAA,GAAW,IAAA,CAAK,UAAA,EAAY,QAAQ,CAAA;AAE1C,MAAA,IAAI;AACF,QAAA,MAAM,OAAA,GAAU,MAAM,QAAA,CAAS,QAAA,EAAU,OAAO,CAAA;AAChD,QAAA,MAAM,OAAA,GAAU,IAAA,CAAK,gBAAA,CAAiB,OAAO,CAAA;AAC7C,QAAA,IAAI,OAAA,EAAS;AACX,UAAA,OAAO,OAAA;AAAA,QACT;AAAA,MACF,CAAA,CAAA,MAAQ;AAAA,MAER;AAGA,MAAA,MAAM,SAAA,GAAY,QAAQ,UAAU,CAAA;AACpC,MAAA,IAAI,UAAA,KAAe,IAAA,IAAQ,SAAA,KAAc,UAAA,EAAY;AACnD,QAAA;AAAA,MACF;AAEA,MAAA,UAAA,GAAa,SAAA;AAAA,IACf;AAGA,IAAA,IAAI,OAAA,CAAQ,QAAQ,CAAA,KAAM,IAAA,EAAM;AAC9B,MAAA,MAAM,YAAA,GAAe,IAAA,CAAK,IAAA,EAAM,QAAQ,CAAA;AACxC,MAAA,IAAI;AACF,QAAA,MAAM,OAAA,GAAU,MAAM,QAAA,CAAS,YAAA,EAAc,OAAO,CAAA;AACpD,QAAA,OAAO,IAAA,CAAK,iBAAiB,OAAO,CAAA;AAAA,MACtC,CAAA,CAAA,MAAQ;AAAA,MAER;AAAA,IACF;AAEA,IAAA,OAAO,MAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,iBAAiB,OAAA,EAAqC;AAC5D,IAAA,MAAM,KAAA,GAAQ,OAAA,CAAQ,KAAA,CAAM,IAAI,CAAA;AAChC,IAAA,KAAA,MAAW,QAAQ,KAAA,EAAO;AACxB,MAAA,MAAM,OAAA,GAAU,KAAK,IAAA,EAAK;AAE1B,MAAA,IAAI,OAAA,IAAW,CAAC,OAAA,CAAQ,UAAA,CAAW,GAAG,CAAA,EAAG;AACvC,QAAA,OAAO,OAAA;AAAA,MACT;AAAA,IACF;AACA,IAAA,OAAO,MAAA;AAAA,EACT;AACF;;AChEA,MAAMA,eAAA,GAAgB,iBAAA;AAGtB,MAAM,sBAAA,GAAyB,0CAAA;AAM/B,SAAS,iBAAA,CAAkB,GAAW,CAAA,EAAmB;AACvD,EAAA,MAAM,KAAK,CAAA,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,IAAI,MAAM,CAAA;AAClC,EAAA,MAAM,KAAK,CAAA,CAAE,KAAA,CAAM,GAAG,CAAA,CAAE,IAAI,MAAM,CAAA;AAClC,EAAA,OAAO,GAAG,CAAC,CAAA,GAAK,EAAA,CAAG,CAAC,KAAM,EAAA,CAAG,CAAC,CAAA,GAAK,EAAA,CAAG,CAAC,CAAA,IAAM,EAAA,CAAG,CAAC,CAAA,GAAK,GAAG,CAAC,CAAA;AAC5D;AAaO,MAAM,wBAAA,CAAqD;AAAA,EAChE,YAA6B,UAAA,EAAgC;AAAhC,IAAA,IAAA,CAAA,UAAA,GAAA,UAAA;AAAA,EAAiC;AAAA,EAE9D,MAAM,OAAA,CACJ,OAAA,EACA,WAAA,EACA,gBAAA,EACkC;AAClC,IAAA,MAAM,OAAA,GAAU,QAAQ,IAAA,EAAK;AAG7B,IAAA,IAAI,YAAY,MAAA,EAAQ;AACtB,MAAA,OAAO,MAAA;AAAA,IACT;AAGA,IAAA,IAAIA,eAAA,CAAc,IAAA,CAAK,OAAO,CAAA,EAAG;AAC/B,MAAA,OAAO,EAAE,KAAA,EAAO,OAAA,EAAS,QAAA,EAAU,OAAA,EAAS,QAAQ,OAAA,EAAQ;AAAA,IAC9D;AAGA,IAAA,IAAI,YAAY,QAAA,EAAU;AACxB,MAAA,MAAM,MAAA,GAAS,MAAM,IAAA,CAAK,kBAAA,EAAmB;AAC7C,MAAA,OAAO,EAAE,KAAA,EAAO,OAAA,EAAS,QAAA,EAAU,MAAA,EAAQ,QAAQ,QAAA,EAAS;AAAA,IAC9D;AAGA,IAAA,IAAI,YAAY,EAAA,EAAI;AAClB,MAAA,MAAM,cAAc,MAAM,IAAA,CAAK,UAAA,CAAW,IAAA,CAAK,kBAAkB,WAAW,CAAA;AAC5E,MAAA,IAAI,WAAA,EAAa;AACf,QAAA,OAAO,IAAA,CAAK,kBAAA,CAAmB,WAAA,EAAa,WAAW,CAAA;AAAA,MACzD;AAEA,MAAA,MAAM,MAAA,GAAS,MAAM,IAAA,CAAK,kBAAA,EAAmB;AAC7C,MAAA,OAAO,EAAE,KAAA,EAAO,QAAA,EAAU,QAAA,EAAU,MAAA,EAAQ,QAAQ,QAAA,EAAS;AAAA,IAC/D;AAGA,IAAA,MAAM,IAAI,KAAA;AAAA,MACR,oCAAoC,OAAO,CAAA,oCAAA;AAAA,KAC7C;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAc,kBAAA,CACZ,WAAA,EACA,WAAA,EACkC;AAClC,IAAA,IAAI,gBAAgB,MAAA,EAAQ;AAC1B,MAAA,OAAO,MAAA;AAAA,IACT;AAEA,IAAA,IAAI,gBAAgB,QAAA,EAAU;AAC5B,MAAA,MAAM,MAAA,GAAS,MAAM,IAAA,CAAK,kBAAA,EAAmB;AAC7C,MAAA,OAAO,EAAE,KAAA,EAAO,WAAA,EAAa,QAAA,EAAU,MAAA,EAAQ,QAAQ,MAAA,EAAO;AAAA,IAChE;AAEA,IAAA,IAAIA,eAAA,CAAc,IAAA,CAAK,WAAW,CAAA,EAAG;AACnC,MAAA,OAAO,EAAE,KAAA,EAAO,WAAA,EAAa,QAAA,EAAU,WAAA,EAAa,QAAQ,MAAA,EAAO;AAAA,IACrE;AAEA,IAAA,MAAM,IAAI,KAAA;AAAA,MACR,CAAA,mBAAA,EAAsB,WAAW,CAAA,GAAA,EAAM,WAAW,CAAA,oCAAA;AAAA,KACpD;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAc,kBAAA,GAAsC;AAClD,IAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,CAAA,EAAG,sBAAsB,CAAA,WAAA,CAAa,CAAA;AACnE,IAAA,IAAI,CAAC,SAAS,EAAA,EAAI;AAChB,MAAA,MAAM,IAAI,KAAA;AAAA,QACR,CAAA,yCAAA,EAAiD,QAAA,CAAS,MAAM,CAAA,CAAA,EAAI,SAAS,UAAU,CAAA;AAAA,OACzF;AAAA,IACF;AAEA,IAAA,MAAM,IAAA,GAAQ,MAAM,QAAA,CAAS,IAAA,EAAK;AAIlC,IAAA,MAAM,QAAA,GAAW,MAAA,CAAO,IAAA,CAAK,IAAA,CAAK,QAAQ,CAAA,CACvC,MAAA,CAAO,CAAA,CAAA,KAAKA,eAAA,CAAc,IAAA,CAAK,CAAC,CAAC,CAAA,CACjC,KAAK,iBAAiB,CAAA;AAEzB,IAAA,IAAI,QAAA,CAAS,WAAW,CAAA,EAAG;AACzB,MAAA,MAAM,IAAI,MAAM,yDAAyD,CAAA;AAAA,IAC3E;AAEA,IAAA,OAAO,SAAS,CAAC,CAAA;AAAA,EACnB;AACF;AAWO,MAAM,yBAAA,CAAuD;AAAA,EAClE,MAAM,YAAY,OAAA,EAAmC;AACnD,IAAA,MAAM,GAAA,GAAM,WAAA,CAAY,WAAA,EAAa,OAAO,CAAA;AAC5C,IAAA,MAAM,UAAA,GAAa,WAAA,EAAY,CAAE,EAAA,KAAO,YAAY,eAAA,GAAkB,WAAA;AACtE,IAAA,OAAO,UAAA,CAAW,IAAA,CAAK,GAAA,EAAK,UAAU,CAAC,CAAA;AAAA,EACzC;AAAA,EAEA,MAAM,OAAA,CAAQ,OAAA,EAAiB,KAAA,EAAoC;AACjE,IAAA,MAAM,QAAA,GAAW,WAAA,CAAY,WAAA,EAAa,OAAO,CAAA;AAEjD,IAAA,IAAI,MAAM,IAAA,CAAK,WAAA,CAAY,OAAO,CAAA,EAAG;AACnC,MAAA,KAAA,CAAM,IAAA,CAAK,CAAA,UAAA,EAAa,OAAO,CAAA,mBAAA,EAAsB,QAAQ,CAAA,CAAE,CAAA;AAC/D,MAAA,OAAO,QAAA;AAAA,IACT;AAEA,IAAA,MAAM,EAAE,EAAA,EAAI,IAAA,EAAK,GAAI,WAAA,EAAY;AACjC,IAAA,MAAM,UAAU,CAAA,UAAA,EAAa,OAAO,CAAA,CAAA,EAAI,EAAE,IAAI,IAAI,CAAA,IAAA,CAAA;AAClD,IAAA,MAAM,MAAM,CAAA,EAAG,sBAAsB,CAAA,CAAA,EAAI,OAAO,IAAI,OAAO,CAAA,CAAA;AAE3D,IAAA,KAAA,CAAM,IAAA,CAAK,CAAA,sBAAA,EAAyB,OAAO,CAAA,MAAA,EAAS,GAAG,CAAA,CAAE,CAAA;AAEzD,IAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,GAAG,CAAA;AAChC,IAAA,IAAI,CAAC,SAAS,EAAA,EAAI;AAChB,MAAA,MAAM,IAAI,KAAA;AAAA,QACR,gCAAgC,OAAO,CAAA,EAAA,EAAU,SAAS,MAAM,CAAA,CAAA,EAAI,SAAS,UAAU,CAAA;AAAA,OACzF;AAAA,IACF;AAGA,IAAA,MAAM,KAAA,CAAM,QAAA,EAAU,EAAE,SAAA,EAAW,MAAM,CAAA;AAGzC,IAAA,MAAM,OAAA,GAAU,IAAA,CAAK,QAAA,EAAU,OAAO,CAAA;AACtC,IAAA,MAAM,SAAS,MAAA,CAAO,IAAA,CAAK,MAAM,QAAA,CAAS,aAAa,CAAA;AACvD,IAAA,MAAM,SAAA,CAAU,SAAS,MAAM,CAAA;AAG/B,IAAA,MAAM,MAAA,GAAS,MAAM,KAAA,CAAM,IAAA,CAAK,OAAA,EAAS,CAAC,IAAA,EAAM,OAAA,EAAS,IAAA,EAAM,QAAQ,CAAA,EAAG;AAAA,MACxE,MAAA,EAAQ;AAAA,KACT,CAAA;AAED,IAAA,IAAI,MAAA,CAAO,aAAa,CAAA,EAAG;AACzB,MAAA,MAAM,IAAI,KAAA,CAAM,CAAA,4BAAA,EAA+B,OAAO,CAAA,EAAA,EAAK,MAAA,CAAO,MAAM,CAAA,CAAE,CAAA;AAAA,IAC5E;AAGA,IAAA,MAAM,OAAO,OAAO,CAAA;AAGpB,IAAA,MAAM,UAAA,GAAa,EAAA,KAAO,SAAA,GAAY,eAAA,GAAkB,WAAA;AACxD,IAAA,MAAM,KAAA,CAAM,IAAA,CAAK,QAAA,EAAU,UAAU,GAAG,GAAK,CAAA;AAE7C,IAAA,KAAA,CAAM,IAAA,CAAK,CAAA,UAAA,EAAa,OAAO,CAAA,cAAA,EAAiB,QAAQ,CAAA,CAAE,CAAA;AAC1D,IAAA,OAAO,QAAA;AAAA,EACT;AACF;;AC3LA,MAAM,aAAA,GAAgB,iBAAA;AAGtB,MAAM,qBAAA,GACJ,sEAAA;AAGF,MAAM,uBAAA,GAA0B,8DAAA;AAazB,MAAM,yBAAA,CAAsD;AAAA,EACjE,YAA6B,UAAA,EAAgC;AAAhC,IAAA,IAAA,CAAA,UAAA,GAAA,UAAA;AAAA,EAAiC;AAAA,EAE9D,MAAM,OAAA,CACJ,OAAA,EACA,WAAA,EACA,gBAAA,EACkC;AAClC,IAAA,MAAM,OAAA,GAAU,QAAQ,IAAA,EAAK;AAG7B,IAAA,IAAI,YAAY,MAAA,EAAQ;AACtB,MAAA,OAAO,MAAA;AAAA,IACT;AAGA,IAAA,IAAI,aAAA,CAAc,IAAA,CAAK,OAAO,CAAA,EAAG;AAC/B,MAAA,OAAO,EAAE,KAAA,EAAO,OAAA,EAAS,QAAA,EAAU,OAAA,EAAS,QAAQ,OAAA,EAAQ;AAAA,IAC9D;AAGA,IAAA,IAAI,YAAY,QAAA,EAAU;AACxB,MAAA,MAAM,MAAA,GAAS,MAAM,IAAA,CAAK,kBAAA,EAAmB;AAC7C,MAAA,OAAO,EAAE,KAAA,EAAO,OAAA,EAAS,QAAA,EAAU,MAAA,EAAQ,QAAQ,QAAA,EAAS;AAAA,IAC9D;AAGA,IAAA,IAAI,YAAY,EAAA,EAAI;AAClB,MAAA,MAAM,cAAc,MAAM,IAAA,CAAK,UAAA,CAAW,IAAA,CAAK,kBAAkB,WAAW,CAAA;AAC5E,MAAA,IAAI,WAAA,EAAa;AACf,QAAA,OAAO,IAAA,CAAK,kBAAA,CAAmB,WAAA,EAAa,WAAW,CAAA;AAAA,MACzD;AAEA,MAAA,MAAM,MAAA,GAAS,MAAM,IAAA,CAAK,kBAAA,EAAmB;AAC7C,MAAA,OAAO,EAAE,KAAA,EAAO,QAAA,EAAU,QAAA,EAAU,MAAA,EAAQ,QAAQ,QAAA,EAAS;AAAA,IAC/D;AAGA,IAAA,MAAM,IAAI,KAAA;AAAA,MACR,qCAAqC,OAAO,CAAA,oCAAA;AAAA,KAC9C;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,MAAc,kBAAA,CACZ,WAAA,EACA,WAAA,EACkC;AAClC,IAAA,IAAI,gBAAgB,MAAA,EAAQ;AAC1B,MAAA,OAAO,MAAA;AAAA,IACT;AAEA,IAAA,IAAI,gBAAgB,QAAA,EAAU;AAC5B,MAAA,MAAM,MAAA,GAAS,MAAM,IAAA,CAAK,kBAAA,EAAmB;AAC7C,MAAA,OAAO,EAAE,KAAA,EAAO,WAAA,EAAa,QAAA,EAAU,MAAA,EAAQ,QAAQ,MAAA,EAAO;AAAA,IAChE;AAEA,IAAA,IAAI,aAAA,CAAc,IAAA,CAAK,WAAW,CAAA,EAAG;AACnC,MAAA,OAAO,EAAE,KAAA,EAAO,WAAA,EAAa,QAAA,EAAU,WAAA,EAAa,QAAQ,MAAA,EAAO;AAAA,IACrE;AAEA,IAAA,MAAM,IAAI,KAAA;AAAA,MACR,CAAA,mBAAA,EAAsB,WAAW,CAAA,GAAA,EAAM,WAAW,CAAA,oCAAA;AAAA,KACpD;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUA,MAAc,kBAAA,GAAsC;AAClD,IAAA,MAAM,OAAA,GAAkC;AAAA,MACtC,MAAA,EAAQ,gCAAA;AAAA,MACR,YAAA,EAAc;AAAA,KAChB;AAGA,IAAA,MAAM,KAAA,GAAQ,OAAA,CAAQ,GAAA,CAAI,cAAc,CAAA;AACxC,IAAA,IAAI,KAAA,EAAO;AACT,MAAA,OAAA,CAAQ,eAAe,CAAA,GAAI,CAAA,OAAA,EAAU,KAAK,CAAA,CAAA;AAAA,IAC5C;AAEA,IAAA,MAAM,WAAW,MAAM,KAAA,CAAM,qBAAA,EAAuB,EAAE,SAAS,CAAA;AAC/D,IAAA,IAAI,CAAC,SAAS,EAAA,EAAI;AAChB,MAAA,MAAM,IAAA,GACJ,QAAA,CAAS,MAAA,KAAW,GAAA,GAChB,mEAAA,GACA,EAAA;AACN,MAAA,MAAM,IAAI,KAAA;AAAA,QACR,8CACK,QAAA,CAAS,MAAM,IAAI,QAAA,CAAS,UAAU,GAAG,IAAI,CAAA;AAAA,OACpD;AAAA,IACF;AAEA,IAAA,MAAM,IAAA,GAAQ,MAAM,QAAA,CAAS,IAAA,EAAK;AAClC,IAAA,MAAM,MAAM,IAAA,CAAK,QAAA;AAGjB,IAAA,MAAM,OAAA,GAAU,IAAI,UAAA,CAAW,GAAG,IAAI,GAAA,CAAI,KAAA,CAAM,CAAC,CAAA,GAAI,GAAA;AAErD,IAAA,IAAI,CAAC,aAAA,CAAc,IAAA,CAAK,OAAO,CAAA,EAAG;AAChC,MAAA,MAAM,IAAI,KAAA,CAAM,CAAA,8CAAA,EAAiD,GAAG,CAAA,CAAA,CAAG,CAAA;AAAA,IACzE;AAEA,IAAA,OAAO,OAAA;AAAA,EACT;AACF;AAWO,MAAM,0BAAA,CAAwD;AAAA,EACnE,MAAM,YAAY,OAAA,EAAmC;AACnD,IAAA,MAAM,GAAA,GAAM,WAAA,CAAY,YAAA,EAAc,OAAO,CAAA;AAC7C,IAAA,MAAM,UAAA,GAAa,WAAA,EAAY,CAAE,EAAA,KAAO,YAAY,gBAAA,GAAmB,YAAA;AACvE,IAAA,OAAO,UAAA,CAAW,IAAA,CAAK,GAAA,EAAK,UAAU,CAAC,CAAA;AAAA,EACzC;AAAA,EAEA,MAAM,OAAA,CAAQ,OAAA,EAAiB,KAAA,EAAoC;AACjE,IAAA,MAAM,QAAA,GAAW,WAAA,CAAY,YAAA,EAAc,OAAO,CAAA;AAElD,IAAA,IAAI,MAAM,IAAA,CAAK,WAAA,CAAY,OAAO,CAAA,EAAG;AACnC,MAAA,KAAA,CAAM,IAAA,CAAK,CAAA,WAAA,EAAc,OAAO,CAAA,mBAAA,EAAsB,QAAQ,CAAA,CAAE,CAAA;AAChE,MAAA,OAAO,QAAA;AAAA,IACT;AAEA,IAAA,MAAM,EAAE,EAAA,EAAI,IAAA,EAAK,GAAI,WAAA,EAAY;AACjC,IAAA,MAAM,UAAA,GAAa,EAAA,KAAO,SAAA,GAAY,gBAAA,GAAmB,YAAA;AACzD,IAAA,MAAM,YAAA,GAAe,CAAA,WAAA,EAAc,EAAE,CAAA,CAAA,EAAI,IAAI,CAAA,CAAA;AAC7C,IAAA,MAAM,MAAM,CAAA,EAAG,uBAAuB,CAAA,EAAA,EAAK,OAAO,IAAI,YAAY,CAAA,CAAA;AAElE,IAAA,KAAA,CAAM,IAAA,CAAK,CAAA,uBAAA,EAA0B,OAAO,CAAA,MAAA,EAAS,GAAG,CAAA,CAAE,CAAA;AAE1D,IAAA,MAAM,QAAA,GAAW,MAAM,KAAA,CAAM,GAAG,CAAA;AAChC,IAAA,IAAI,CAAC,SAAS,EAAA,EAAI;AAChB,MAAA,MAAM,IAAI,KAAA;AAAA,QACR,iCAAiC,OAAO,CAAA,EAAA,EAAU,SAAS,MAAM,CAAA,CAAA,EAAI,SAAS,UAAU,CAAA;AAAA,OAC1F;AAAA,IACF;AAGA,IAAA,MAAM,KAAA,CAAM,QAAA,EAAU,EAAE,SAAA,EAAW,MAAM,CAAA;AAGzC,IAAA,MAAM,UAAA,GAAa,IAAA,CAAK,QAAA,EAAU,UAAU,CAAA;AAC5C,IAAA,MAAM,SAAS,MAAA,CAAO,IAAA,CAAK,MAAM,QAAA,CAAS,aAAa,CAAA;AACvD,IAAA,MAAM,SAAA,CAAU,YAAY,MAAM,CAAA;AAGlC,IAAA,MAAM,KAAA,CAAM,YAAY,GAAK,CAAA;AAE7B,IAAA,KAAA,CAAM,IAAA,CAAK,CAAA,WAAA,EAAc,OAAO,CAAA,cAAA,EAAiB,QAAQ,CAAA,CAAE,CAAA;AAC3D,IAAA,OAAO,QAAA;AAAA,EACT;AACF;;ACzLA,MAAM,UAAA,GAAa,IAAI,iBAAA,EAAkB;AACzC,MAAM,QAAA,GAAW,IAAI,wBAAA,CAAyB,UAAU,CAAA;AACxD,MAAM,SAAA,GAAY,IAAI,yBAAA,EAA0B;AAMzC,MAAM,wBAAwB,UAAA,CAAW;AAAA,EACrC,IAAA,GAAO,WAAA;AAAA,EAEG,KAAA,uBAAY,GAAA,CAAuD;AAAA,IACpF,CAAC,SAAA,EAAW,IAAA,CAAK,UAAA,CAAW,IAAA,CAAK,IAAI,CAAC;AAAA,GACvC,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,MAAc,WAAW,KAAA,EAAuC;AAC9D,IAAA,IAAI;AACF,MAAA,MAAM,QAAA,GAAW,YAAY,KAAK,CAAA;AAElC,MAAA,KAAA,CAAM,IAAA,CAAK,CAAA,mBAAA,EAAsB,QAAA,CAAS,OAAO,CAAA,UAAA,CAAY,CAAA;AAG7D,MAAA,MAAM,gBAAA;AAAA,QACJ,KAAA;AAAA,QACA,WAAA;AAAA,QACA,QAAA,CAAS,gBAAA;AAAA,QACT,QAAA,CAAS,oBAAA;AAAA,QACT,QAAA,CAAS,gBAAA;AAAA,QACT,QAAA;AAAA,QACA;AAAA,OACF;AAGA,MAAA,MAAM,OAAA,GAAU,gBAAA,CAAiB,MAAA,CAAO,QAAA,CAAS,OAAO,CAAA,CAAE,oBAAA;AAAA,QACxD,QAAA,CAAS;AAAA,OACX;AACA,MAAA,yBAAA,CAA0B,SAAS,QAAQ,CAAA;AAC3C,MAAA,MAAM,OAAA,GAAU,QAAQ,KAAA,EAAM;AAG9B,MAAA,OAAO,MAAM,iBAAA;AAAA,QACX,KAAA;AAAA,QACA,CAAA,UAAA,EAAa,SAAS,OAAO,CAAA,CAAA;AAAA,QAC7B,OAAA;AAAA,QACA,QAAA;AAAA,QACA,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,IAAI,CAAA;AAAA,QACtB,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,IAAI;AAAA,OACxB;AAAA,IACF,SAAS,KAAA,EAAO;AACd,MAAA,OAAO,IAAA,CAAK,OAAA,CAAQ,KAAA,YAAiB,KAAA,GAAQ,KAAA,GAAQ,IAAI,KAAA,CAAM,MAAA,CAAO,KAAK,CAAC,CAAC,CAAA;AAAA,IAC/E;AAAA,EACF;AACF;AAKO,SAAS,qBAAA,GAAyC;AACvD,EAAA,OAAO,IAAI,eAAA,EAAgB;AAC7B;;;;"}